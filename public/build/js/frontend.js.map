{"version":3,"sources":["plugins.js","main.js","essemble_core.min.js","jquery.easing.1.3.js","jquery.transit.min.js","mcq.js","quiz.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5GA;AACA;AACA;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5MA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9cA","file":"frontend.js","sourcesContent":["// Avoid `console` errors in browsers that lack a console.\n(function() {\n    var method;\n    var noop = function () {};\n    var methods = [\n        'assert', 'clear', 'count', 'debug', 'dir', 'dirxml', 'error',\n        'exception', 'group', 'groupCollapsed', 'groupEnd', 'info', 'log',\n        'markTimeline', 'profile', 'profileEnd', 'table', 'time', 'timeEnd',\n        'timeline', 'timelineEnd', 'timeStamp', 'trace', 'warn'\n    ];\n    var length = methods.length;\n    var console = (window.console = window.console || {});\n\n    while (length--) {\n        method = methods[length];\n\n        // Only stub undefined methods.\n        if (!console[method]) {\n            console[method] = noop;\n        }\n    }\n}());\n\n// Place any jQuery/helper plugins in here.\n$(function(){\n    $.ajaxSetup({\n        headers: {\n            'X-CSRF-TOKEN': $('meta[name=\"_token\"]').attr('content')\n        }\n    });\n\n    /*\n     Allows you to add data-method=\"METHOD to links to automatically inject a form with the method on click\n     Example: <a href=\"{{route('customers.destroy', $customer->id)}}\" data-method=\"delete\" name=\"delete_item\">Delete</a>\n     Injects a form with that's fired on click of the link with a DELETE request.\n     Good because you don't have to dirty your HTML with delete forms everywhere.\n     */\n    $('[data-method]').append(function(){\n        return \"\\n\"+\n        \"<form action='\"+$(this).attr('href')+\"' method='POST' name='delete_item' style='display:none'>\\n\"+\n        \"   <input type='hidden' name='_method' value='\"+$(this).attr('data-method')+\"'>\\n\"+\n        \"   <input type='hidden' name='_token' value='\"+$('meta[name=\"_token\"]').attr('content')+\"'>\\n\"+\n        \"</form>\\n\"\n    })\n        .removeAttr('href')\n        .attr('style','cursor:pointer;')\n        .attr('onclick','$(this).find(\"form\").submit();');\n\n    /*\n     Generic are you sure dialog\n     */\n    $('form[name=delete_item]').submit(function(e){\n\n         e.preventDefault();\n         var _this = $(this);\n        swal({\n          title: \"Are you sure?\",\n          text: \"You will not be able to recover this imaginary file!\",\n          type: \"warning\",\n          showCancelButton: true,\n          confirmButtonColor: \"#DD6B55\",\n          confirmButtonText: \"Yes, delete it!\",\n          closeOnConfirm: false\n        },\n        function(){\n            _this.unbind('submit').submit();\n            swal(\"Deleted!\", \"...\", \"success\");\n          \n        });\n\n       // return confirm(\"Are you sure you want to delete this item?\");\n    });\n\n    // $('form[name=delete_item_user]').submit(function(e){\n\n    //      e.preventDefault();\n    //      var linkURL = 'admin/access/users';\n    //     swal({\n    //       title: \"Are you sure?\",\n    //       text: \"You will not be able to recover this imaginary file!\",\n    //       type: \"warning\",\n    //       showCancelButton: true,\n    //       confirmButtonColor: \"#DD6B55\",\n    //       confirmButtonText: \"Yes, delete it!\",\n    //       closeOnConfirm: false\n    //     },\n    //     function(){\n    //         window.location.href = linkURL;\n    //         swal(\"Deleted!\", \"...\", \"success\");\n          \n    //     });\n\n    //    // return confirm(\"Are you sure you want to delete this item?\");\n    // });\n\n    /*\n     Bind all bootstrap tooltips\n     */\n    $(\"[data-toggle=\\\"tooltip\\\"]\").tooltip();\n    $(\"[data-toggle=\\\"popover\\\"]\").popover();\n    //This closes the popover when its clicked away from\n    $('body').on('click', function (e) {\n        $('[data-toggle=\"popover\"]').each(function () {\n            if (!$(this).is(e.target) && $(this).has(e.target).length === 0 && $('.popover').has(e.target).length === 0) {\n                $(this).popover('hide');\n            }\n        });\n    });\n});","$(function(){\n\n});","/**\n * VERSION: 2.1\n * DATE: \n * JS\n * AUTHOR: Ian Duff\n * COPYRIGHT: Essemble Ltd\n * All code © 2015 Essemble Ltd. all rights reserved\n * This code is the property of Essemble Ltd and cannot be copied, reused or modified without prior permission\n **/\n function extend(t,e){var i=e.prototype;e.prototype=Object.create(t.prototype);for(var n in i)e.prototype[n]=i[n];e.prototype.constructor=e,Object.defineProperty(e.prototype,\"constructor\",{enumerable:!1,value:e})}function get(t){return document.getElementById(t)}function getJQ(t){return $(\"#\"+t)}function loadXML(t,e){$.ajax({type:\"GET\",url:t,dataType:\"xml\",error:xmlError,success:e})}function xmlError(t,e){alert(\"xmlError \"+e)}function checkColour(t){var e=null;switch(t){case\"\":break;default:if(-1!=t.indexOf(\"rgb\"))e=t;else{var e=t.replace(\"0x\",\"\");\"#\"!=e.charAt(0)&&(e=\"#\"+e)}}return e}function xmlAttr(t,e){var i=!1;return i=t.attr(e)?!0:!1}function xmlAttrNum(t,e){var i=!1;if(xmlAttr(t,e)){var n=t.attr(e);i=isNaN(parseInt(n))?!1:!0}return i}function xmlAttrStr(t,e){var i=!1;if(xmlAttr(t,e)){var n=t.attr(e);\"\"!=n?i=!0:!1}return i}function create(t){var e=document.createElement(t.type);return t.id&&(e.id=t.id),t.className&&(e.className=t.className),t.imgSrc&&(e.src=t.imgSrc),t.href&&(e.href=t.href),t.inputType&&(e.type=t.inputType),t.inputValue&&(e.value=t.inputValue),t.title&&(e.title=t.title,e.alt=t.title),t.onMouseOver&&(e.onmouseover=t.onMouseOver),t.onMouseOut&&(e.onmouseout=t.onMouseOut),t.onMouseDown&&(e.onmousedown=t.onMouseDown),t.onFocus&&(e.onfocus=t.onFocus),t.onBlur&&(e.onblur=t.onBlur),t.onClick&&(e.onclick=t.onClick),t.tabIndex&&(e.tabIndex=t.tabIndex),t.accessKey&&(e.accessKey=t.accessKey),t.innerHTML&&(e.innerHTML=t.innerHTML),e}function hexToR(t){return parseInt(cutHex(t).substring(0,2),16)}function hexToG(t){return parseInt(cutHex(t).substring(2,4),16)}function hexToB(t){return parseInt(cutHex(t).substring(4,6),16)}function cutHex(t){var e=t;return\"#\"==t.charAt(0)&&(e=t.substring(1,7)),-1!=t.indexOf(\"0x\")&&(e=t.substring(2,8)),e}function hexToRgb(t){var e=/^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;t=t.replace(e,function(t,e,i,n){return e+e+i+i+n+n});var i=/^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(t);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null}function supportsRGBA(){var t=!1,e=document.createElement(\"div\");return e.style.cssText=\"background-color:rgba(150,255,150,.5)\",~(\"\"+e.style.backgroundColor).indexOf(\"rgba\")&&(t=!0),t}function replaceXMLStr(t,e,i){e=e.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g,\"\\\\$&\");var n=new RegExp(e,\"g\"),s=$(t).text().replace(n,i);return $(t).text(s),t}function JQEase(t){t||(t=\"easeOutQuad\");var e=t;if(t.indexOf(\".\")>-1){var i=t.split(\".\"),n=i[0],s=i[1];\"Regular\"==n&&(n=\"Quad\"),e=s+n}return e}function getUnit(t){return-1==t.indexOf(\"%\")&&-1==t.indexOf(\"px\")&&-1==t.indexOf(\"em\")&&(t+=\"px\"),t}function Screen(t){this._container,this._id=t.id,this._xmlPath=t.xmlPath,this._arEvents=[],this._screenElement=null,this._elementLoader=null,t.screenElement&&(this._screenElement=t.screenElement),xmlAttrStr($(t.screenXML),\"xml\")&&(this._xmlPath=$(t.screenXML).attr(\"xml\"),-1==this._xmlPath.indexOf(\".xml\")&&(this._xmlPath+=\".xml\")),this.loadXMLCompleteHandler=function(t){this._xml=$(t),this.createElements($(t)),this.doClickEventById(\"screenloading\",null)}}function PxLoaderImage(t,e,i){var n=this,s=null;this.img=new Image,this.tags=e,this.priority=i;var r=function(){\"complete\"===n.img.readyState&&(l(),s.onLoad(n))},a=function(){l(),s.onLoad(n)},o=function(){l(),s.onError(n)},l=function(){n.unbind(\"load\",a),n.unbind(\"readystatechange\",r),n.unbind(\"error\",o)};this.start=function(e){s=e,n.bind(\"load\",a),n.bind(\"readystatechange\",r),n.bind(\"error\",o),n.img.src=t},this.checkStatus=function(){n.img.complete&&(l(),s.onLoad(n))},this.onTimeout=function(){l(),n.img.complete?s.onLoad(n):s.onTimeout(n)},this.getName=function(){return t},this.bind=function(t,e){n.img.addEventListener?n.img.addEventListener(t,e,!1):n.img.attachEvent&&n.img.attachEvent(\"on\"+t,e)},this.unbind=function(t,e){n.img.removeEventListener?n.img.removeEventListener(t,e,!1):n.img.detachEvent&&n.img.detachEvent(\"on\"+t,e)}}function Box(t){if(this._element=t.element,this._screen=t.element._screen,this._container=t.container,this._xml=t.xml,this._width=0,this._height=0,this._scroll=!1,this._element._width&&(this._width=this._element._width),this._element._height&&(this._height=this._element._height),xmlAttr(this._xml,\"scroll\")&&(this._scroll=Boolean(-1!=this._xml.attr(\"scroll\").toLowerCase().indexOf(\"true\"))),this._xml.children().length>0)for(var e=0;e<this._xml.children().length;e++){var i=this._xml.children()[e],n=t.element._elementLoader,s=new Element({screen:this._screen,xml:i});xmlAttr($(i),\"target\")||(s._target=this._container),n.addElement(s)}}function Button(t){this._screen=t.element._screen,this._container=t.container,this._xml=t.xml,this._xpad=10,this._ypad=6;var e=create({type:\"input\",inputType:\"button\",id:\"btn\",inputValue:$(this._xml).text().replace(/<[^>]*>/g,\"\")});this._container.appendChild(e),$(e).css(\"width\",\"auto\"),$(e).css(\"height\",\"auto\"),xmlAttrNum(this._xml,\"width\")&&$(e).css(\"width\",this._xml.attr(\"width\")),xmlAttrNum(this._xml,\"height\")&&$(e).css(\"height\",this._xml.attr(\"height\"))}function Element(t){this._screen=t.screen,this._xml=$(t.xml),this._type=t.xml.tagName||\"sprite\",this._elementLoader=t.loader||this._screen._elementLoader,this._id=this._xml.attr(\"id\")||t.id||this.createInstanceName(),this._relativePos=!1,this._x=0,this._y=0,this._width=null,this._height=null,this._target=null,this._container=null,this._scroll=!1,this._anim=\"none\",this._animease=\"Regular.easeOut\",this._animtime=.5,this._animdelay=0,this._animOnComplete,this._eventq=!0,this._event=null,this._arRollovers=[],this._arRollouts=[],this._arClicks=[],this._custom=null,this._initialAnimComplete=!1,this._elementScreen=null,xmlAttrStr(this._xml,\"x\")&&(this._x=this._xml.attr(\"x\")),xmlAttrStr(this._xml,\"y\")&&(this._y=this._xml.attr(\"y\")),t.x&&(this._x=t.x),t.y&&(this._y=t.y),xmlAttrStr(this._xml,\"width\")&&(this._width=this._xml.attr(\"width\")),xmlAttrStr(this._xml,\"height\")&&(this._height=this._xml.attr(\"height\")),t.width&&(this._width=t.width),t.height&&(this._height=t.height),this._filter=this._xml.attr(\"filter\")||null,xmlAttrStr(this._xml,\"scroll\")&&(this._scroll=Boolean(-1!=this._xml.attr(\"scroll\").toLowerCase().indexOf(\"true\"))),xmlAttrStr(this._xml,\"anim\")&&(this._anim=this._xml.attr(\"anim\").toLowerCase()),xmlAttrNum(this._xml,\"animrotate\")&&(this._animrotate=this._xml.attr(\"animrotate\")),xmlAttrStr(this._xml,\"ease\")&&(this._animease=this._xml.attr(\"ease\")),xmlAttrNum(this._xml,\"animtime\")&&(this._animtime=parseFloat(this._xml.attr(\"animtime\"))),xmlAttrNum(this._xml,\"animdelay\")&&(this._animdelay=parseFloat(this._xml.attr(\"animdelay\"))),xmlAttrStr(this._xml,\"animcomplete\")&&(this._animOnComplete=this._xml.attr(\"animcomplete\")),xmlAttrStr(this._xml,\"event\")&&(this._event=this._xml.attr(\"event\")),xmlAttrStr(this._xml,\"eventq\")&&(this._eventq=Boolean(\"false\"!=this._xml.attr(\"eventq\").toLowerCase()))}function ElementLoader(t){var e=this;this._screen=t.screen,this._arElements=t.elements||[],this._onLoadComplete=t.onLoadComplete||null,this._onAnimsComplete=t.onAnimsComplete||null,this._onCompleteScope=t.onCompleteScope||this._screen,this._onCompleteParams=t.onCompleteParams||null,this._preloader=null,this._loadQueue,this._batchFinished=!1,this._loader=new PxLoader;for(var i=0;i<this._arElements.length;i++)this._arElements[i]._elementLoader=this;this._loader.addProgressListener(function(t){var e=new Image;e.src=t.resource.getName();var i=t.resource.element;xmlAttrStr(i._xml,\"className\")&&$(e).addClass(i._xml.attr(\"className\")),xmlAttrStr(i._xml,\"class\")&&$(e).addClass(i._xml.attr(\"class\")),$(i._container).append(e)}),this._loader.addCompletionListener(function(){e.hidePreloader(),e._onLoadComplete&&(e._onCompleteParams?e._onCompleteScope[e._onLoadComplete](e._onCompleteParams):e._onCompleteScope[e._onLoadComplete]());for(var t=0;t<e._arElements.length;t++)e._arElements[t]._relativePos?e.delayRelativePos(e._arElements[t]):e.delayAnimate(e._arElements[t])})}function Text(t){this._element=t.element,this._screen=this._element._screen,this._container=t.container,this._xml=t.xml,$(this._container).append(this._xml.text())}var supportsTouch=\"ontouchstart\"in window||navigator.msMaxTouchPoints,bRGBASupported=supportsRGBA(),ua=navigator.userAgent.toLowerCase(),isiPad=null!=ua.match(/ipad/i),isiPhone=null!=ua.match(/iphone/i),isChrome=null!=ua.match(/chrome/i);null!==ua.match(/android 2\\.[12]/)&&(HTMLMediaElement.prototype.canPlayType=function(t){return null!==t.match(/video\\/(mp4|m4v)/gi)?\"maybe\":\"\"}),Screen.prototype={load:function(t,e){this._elementLoader&&(this._elementLoader._arElements=null,this._elementLoader=null),this._container=t,e||this.unload(this._container),this._arEvents=[],this._xmlPath?loadXML(this._xmlPath,this.loadXMLCompleteHandler.bind(this)):alert(\"xml file has not been defined\")},screenIsElement:function(){var t=!1;return this._screenElement&&(t=!0),t},createElements:function(t){var e;this._elementLoader=new ElementLoader(this.screenIsElement()?{screen:this,elements:[],onAnimsComplete:\"screenAnimsComplete\",onCompleteParams:[],onCompleteScope:this}:{screen:this,elements:[],onLoadComplete:\"screenLoadComplete\",onAnimsComplete:\"screenAnimsComplete\",onCompleteParams:[],onCompleteScope:this});var i=this;$(t).find(\"data\").children().each(function(){switch(this.tagName.toLowerCase()){case\"events\":i.createEvents(this);break;default:e=new Element({screen:i,xml:this}),i.getElementLoaderArray().push(e)}}),this._elementLoader.load()},createEvents:function(t){var e=this;$(t).find(\"event\").each(function(){var t=$(this).attr(\"id\"),i=[],n=[],s=[];$(this).find(\"rollover\").children().each(function(){i.push($(this))}),$(this).find(\"rollout\").children().each(function(){n.push($(this))}),$(this).find(\"click\").children().each(function(){s.push($(this))});var r={};r._id=t,r._arRollovers=i,r._arRollouts=n,r._arClicks=s,e._arEvents.push(r)})},screenLoadComplete:function(){},screenAnimsComplete:function(){this.doClickEventById(\"screenloaded\",null)},container:function(){return this._container},unload:function(t){t.innerHTML=\"\",this._elementLoader&&this._elementLoader.stop()},hide:function(){$(this._container).hide()},show:function(){$(this._container).show()},getElementLoaderArray:function(){return this._elementLoader.getElements()},getElementById:function(t){for(var e=null,i=this.getElementLoaderArray(),n=0;n<i.length;n++)if(i[n]._id==t){e=i[n];break}return e},getElementByType:function(t){for(var e=null,i=this.getElementLoaderArray(),n=0;n<i.length;n++)if(i[n]._type==t){e=i[n];break}return e},doClickEventById:function(t,e){for(var i=t.split(\",\"),n=0;n<i.length;n++){var t=i[n],s=this.getScreen(t),r=this.getElementId(t),a=s.getEventById(r);a&&a._arClicks.length>0&&s.fireEvents(a._arClicks,e)}},getEventById:function(t){for(var e=null,i=0;i<this._arEvents.length;i++)if(this._arEvents[i]._id==t){e=this._arEvents[i];break}return e},getScreen:function(t){var e=this;return-1!=t.indexOf(\"parent.\")&&(e=this._screenElement._screen),-1!=t.indexOf(\"screen.\")&&(e=this._course.curScreen()),e},getElementId:function(t){var e=t;return-1!=t.indexOf(\".\")&&(e=t.split(\".\")[1]),e},fireEvents:function(t,e){for(var i=0;i<t.length;i++){var n,s,r=$(t[i]),a=r.text().replace(/\\s+/g,\"\").toString(),o=a.split(\",\");switch(r[0].tagName){case\"event\":for(var l=0;l<o.length;l++)n=o[l],this.getScreen(n).doClickEventById(this.getElementId(n),e);break;case\"css\":for(var h=r.attr(\"name\").toString(),c=0;c<o.length;c++)n=o[c],s=\"this\"==n?e:this.getScreen(n).getElementById(this.getElementId(n)),$(s._container).removeClass(),$(s._container).addClass(h);break;case\"url\":var m=r.attr(\"address\"),_=window.open(m);_.focus();break;case\"anim\":for(var u=0;u<o.length;u++){n=o[u],s=\"this\"==n?e:this.getScreen(n).getElementById(this.getElementId(n));var d=s._anim;s._anim=r.attr(\"type\"),s._animtime=r.attr(\"animtime\"),s._animdelay=r.attr(\"animdelay\"),s._animease=r.attr(\"ease\"),s._animOnComplete=r.attr(\"animcomplete\")||null,s.animate(),s._anim=d}break;case\"enable\":for(var f=0;f<o.length;f++)n=o[f],s=\"this\"==n?e:this.getScreen(n).getElementById(this.getElementId(n)),s.enable();break;case\"disable\":for(var p=0;p<o.length;p++)n=o[p],s=\"this\"==o[p]?e:this.getScreen(n).getElementById(this.getElementId(n)),s.disable();break;case\"function\":var g=r.attr(\"name\").toString(),x=r.text(),v=this;\"\"==x&&(x=null),\"this\"==x&&(x=e);var y;if(-1!=g.indexOf(\".\")){var E=g.split(\".\");if(\"parent\"==E[0].toLowerCase()){var b=this._screenElement;b&&(v=b.screen())}else{var y=this.getElementById(E[0]);y&&y._elementScreen&&(v=y._elementScreen)}g=E[1]}v.searchForFunction(g,x)}}},searchForFunction:function(t,e){for(var i=0;i<this.getElementLoaderArray().length;i++){var n=this.getElementLoaderArray()[i];if(n._custom&&\"function\"==typeof n._custom[t]){e?n._custom[t](e,this):n._custom[t](this);break}}\"function\"==typeof this[t]&&(e?this[t](e,this):this[t](this)),\"function\"==typeof window[t]&&(e?window[t](e,this):window[t](this))},id:function(){return this._id},xmlPath:function(){return this._xmlPath}},function(t){function e(t){t=t||{},this.settings=t,null==t.statusInterval&&(t.statusInterval=5e3),null==t.loggingDelay&&(t.loggingDelay=2e4),null==t.noProgressTimeout&&(t.noProgressTimeout=1/0);var e,n=[],s=[],r=Date.now(),a={QUEUED:0,WAITING:1,LOADED:2,ERROR:3,TIMEOUT:4},o=function(t){return null==t?[]:Array.isArray(t)?t:[t]};this.add=function(t){t.tags=new i(t.tags),null==t.priority&&(t.priority=1/0),n.push({resource:t,status:a.QUEUED})},this.addProgressListener=function(t,e){s.push({callback:t,tags:new i(e)})},this.addCompletionListener=function(t,e){s.push({tags:new i(e),callback:function(e){e.completedCount===e.totalCount&&t(e)}})};var l=function(t){t=o(t);var e=function(e){for(var i=e.resource,n=1/0,s=0;s<i.tags.length;s++)for(var r=0;r<Math.min(t.length,n)&&!(i.tags.all[s]===t[r]&&n>r&&(n=r,0===n))&&0!==n;r++);return n};return function(t,i){var n=e(t),s=e(i);return s>n?-1:n>s?1:t.priority<i.priority?-1:t.priority>i.priority?1:0}};this.start=function(t){if(0==n.length)try{listener=s[1],listener.callback({completedCount:0,totalCount:0})}catch(i){}e=Date.now();var r=l(t);n.sort(r);for(var o=0,c=n.length;c>o;o++){var m=n[o];m.status=a.WAITING,m.resource.start(this)}setTimeout(h,100)};var h=function(){for(var e=!1,i=Date.now()-r,s=i>=t.noProgressTimeout,o=i>=t.loggingDelay,l=0,c=n.length;c>l;l++){var m=n[l];m.status===a.WAITING&&(m.resource.checkStatus&&m.resource.checkStatus(),m.status===a.WAITING&&(s?m.resource.onTimeout():e=!0))}o&&e&&_(),e&&setTimeout(h,t.statusInterval)};this.isBusy=function(){for(var t=0,e=n.length;e>t;t++)if(n[t].status===a.QUEUED||n[t].status===a.WAITING)return!0;return!1};var c=function(t,e){var i,o,l,h,c,_=null;for(i=0,o=n.length;o>i;i++)if(n[i].resource===t){_=n[i];break}if(null!=_&&_.status===a.WAITING)for(_.status=e,r=Date.now(),l=t.tags.length,i=0,o=s.length;o>i;i++)h=s[i],c=0===h.tags.length?!0:t.tags.intersects(h.tags),c&&m(_,h)};this.onLoad=function(t){c(t,a.LOADED)},this.onError=function(t){c(t,a.ERROR)},this.onTimeout=function(t){c(t,a.TIMEOUT)};var m=function(t,e){var i,s,r,o,l=0,h=0;for(i=0,s=n.length;s>i;i++)r=n[i],o=!1,o=0===e.tags.length?!0:r.resource.tags.intersects(e.tags),o&&(h++,(r.status===a.LOADED||r.status===a.ERROR||r.status===a.TIMEOUT)&&l++);e.callback({resource:t.resource,loaded:t.status===a.LOADED,error:t.status===a.ERROR,timeout:t.status===a.TIMEOUT,completedCount:l,totalCount:h})},_=this.log=function(t){if(window.console){var i=Math.round((Date.now()-e)/1e3);window.console.log(\"PxLoader elapsed: \"+i+\" sec\");for(var s=0,r=n.length;r>s;s++){var o=n[s];if(t||o.status===a.WAITING){var l=\"PxLoader: #\"+s+\" \"+o.resource.getName();switch(o.status){case a.QUEUED:l+=\" (Not Started)\";break;case a.WAITING:l+=\" (Waiting)\";break;case a.LOADED:l+=\" (Loaded)\";break;case a.ERROR:l+=\" (Error)\";break;case a.TIMEOUT:l+=\" (Timeout)\"}o.resource.tags.length>0&&(l+=\" Tags: [\"+o.resource.tags.all.join(\",\")+\"]\"),window.console.log(l)}}}}}function i(t){if(this.all=[],this.first=null,this.length=0,this.lookup={},t){if(Array.isArray(t))this.all=t.slice(0);else if(\"object\"==typeof t)for(var e in t)t.hasOwnProperty(e)&&this.all.push(e);else this.all.push(t);this.length=this.all.length,this.length>0&&(this.first=this.all[0]);for(var i=0;i<this.length;i++)this.lookup[this.all[i]]=!0}}i.prototype.intersects=function(t){if(0===this.length||0===t.length)return!1;if(1===this.length&&1===t.length)return this.first===t.first;if(t.length<this.length)return t.intersects(this);for(var e in this.lookup)if(t.lookup[e])return!0;return!1},\"function\"==typeof define&&define.amd&&define(\"PxLoader\",[],function(){return e}),t.PxLoader=e}(this),Date.now||(Date.now=function(){return(new Date).getTime()}),Array.isArray||(Array.isArray=function(t){return\"[object Array]\"===Object.prototype.toString.call(t)}),PxLoader.prototype.addImage=function(t,e,i){var n=new PxLoaderImage(t,e,i);return this.add(n),n.img},\"function\"==typeof define&&define.amd&&define(\"PxLoaderImage\",[],function(){return PxLoaderImage}),Element.prototype={elementLoader:function(){return this._elementLoader},createInstanceName:function(){return\"instance\"+this.elementLoader().getElements().length},getTarget:function(){var t,e=this._screen._container;if(this._xml.attr(\"target\")&&\"\"!=this._xml.attr(\"target\")){if(t=this.elementLoader().getElementById(this._xml.attr(\"target\")))return t._container;if(get(this._xml.attr(\"target\")))return get(this._xml.attr(\"target\"))}return this._target?this._target:e},create:function(){if(this._container=this.createDiv(),this._initialAnimComplete=!1,this.elementHasNoAnim()&&(this._initialAnimComplete=!0),\"screen\"==this._type){var t={screenXML:this._xml,screenElement:this},e=new Screen(t);this._elementScreen=e,e.load(this._container,!0)}if(\"text\"===this._type&&new Text({element:this,container:this._container,xml:this._xml}),\"box\"===this._type&&new Box({element:this,container:this._container,xml:this._xml}),\"button\"===this._type&&new Button({element:this,container:this._container,xml:this._xml}),\"custom\"===this._type)switch(this._xml.attr(\"type\").toLowerCase()){case\"mcq\":this._custom=new MCQ({element:this});break;case\"quiz\":this._custom=new Quiz({element:this});break;default:alert(\"unrecognised custom screen element \"+this._xml.attr(\"type\"))}},elementHasNoAnim:function(){return null==this._anim||\"none\"==this._anim||\"hidden\"==this._anim||\"hide\"==this._anim||\"disabled\"==this._anim||\"disable\"==this._anim||0==this._eventq},registerAnimComplete:function(){this._initialAnimComplete=!0,this._animOnComplete?this._screen.doClickEventById(this._animOnComplete,this):!1,this.elementLoader().checkBatchAnimsComplete()},createDiv:function(){var t=create({type:\"div\",id:this._id});if(xmlAttrStr(this._xml,\"position\")){var e=this._xml.attr(\"position\");$(t).css(\"position\",e)}else $(t).css(\"position\",\"absolute\");if($(t).css(\"visibility\",\"hidden\"),xmlAttrStr(this._xml,\"margin\")&&$(t).css(\"margin\",this._xml.attr(\"margin\")),xmlAttrStr(this._xml,\"margin-top\")&&$(t).css(\"margin-top\",getUnit(this._xml.attr(\"margin-top\"))),xmlAttrStr(this._xml,\"margin-right\")&&$(t).css(\"margin-right\",getUnit(this._xml.attr(\"margin-right\"))),xmlAttrStr(this._xml,\"margin-bottom\")&&$(t).css(\"margin-bottom\",getUnit(this._xml.attr(\"margin-bottom\"))),xmlAttrStr(this._xml,\"margin-left\")&&$(t).css(\"margin-left\",getUnit(this._xml.attr(\"margin-left\"))),xmlAttrStr(this._xml,\"min-width\")&&$(t).css(\"min-width\",getUnit(this._xml.attr(\"min-width\"))),xmlAttrStr(this._xml,\"max-width\")&&$(t).css(\"max-width\",getUnit(this._xml.attr(\"max-width\"))),xmlAttrStr(this._xml,\"min-height\")&&$(t).css(\"min-height\",getUnit(this._xml.attr(\"min-height\"))),xmlAttrStr(this._xml,\"max-height\")&&$(t).css(\"max-height\",getUnit(this._xml.attr(\"max-height\"))),xmlAttrStr(this._xml,\"z-index\")&&$(t).css(\"z-index\",this._xml.attr(\"z-index\")),xmlAttrStr(this._xml,\"float\")&&$(t).css(\"float\",this._xml.attr(\"float\")),xmlAttrStr(this._xml,\"clear\")&&$(t).css(\"clear\",this._xml.attr(\"clear\")),xmlAttrStr(this._xml,\"display\")&&$(t).css(\"display\",this._xml.attr(\"display\")),xmlAttrStr(this._xml,\"overflow\")&&$(t).css(\"overflow\",this._xml.attr(\"overflow\")),\"image\"!=this._type&&(xmlAttrStr(this._xml,\"className\")&&$(t).addClass(this._xml.attr(\"className\")),xmlAttrStr(this._xml,\"class\")&&$(t).addClass(this._xml.attr(\"class\"))),this._scroll){var i=this._xml.attr(\"scroll\").toLowerCase(),n=-1!=i.indexOf(\"x\"),s=-1!=i.indexOf(\"y\");-1!=i.indexOf(\"touch\")?supportsTouch&&(n?$(t).css(\"overflow-x\",\"auto\"):s?$(t).css(\"overflow-y\",\"auto\"):($(t).css(\"overflow-y\",\"auto\"),$(t).css(\"overflow-x\",\"auto\"))):n?($(t).css(\"overflow-x\",\"auto\"),$(t).css(\"overflow-y\",\"hidden\")):s?($(t).css(\"overflow-y\",\"auto\"),$(t).css(\"overflow-x\",\"hidden\")):($(t).css(\"overflow-y\",\"auto\"),$(t).css(\"overflow-x\",\"auto\")),$(t).css(\"-webkit-overflow-scrolling\",\"touch\")}var r=-1!=this._x.toString().indexOf(\"+=\")||-1!=this._x.toString().indexOf(\"-=\")||\"match\"===this._x.toString().toLowerCase()||\"center\"===this._x.toString().toLowerCase()||-1!=this._y.toString().indexOf(\"+=\")||-1!=this._y.toString().indexOf(\"-=\")||\"match\"===this._y.toString().toLowerCase()||\"center\"===this._y.toString().toLowerCase();r&&(this._relativePos=!0),r||(this._x=parseInt(this._x),this._y=parseInt(this._y),$(t).css(\"left\",this._x),$(t).css(\"top\",this._y));var a=this.elementLoader().getPreviousElement(this._id);if(this._width){var o=this._width;\"match\"===o.toString().toLowerCase()&&a&&(o=a._width),this._width=o,$(t).css(\"width\",this._width)}if(this._height){var l=this._height;\"match\"===l.toString().toLowerCase()&&a&&(l=a._height),this._height=l,$(t).css(\"height\",this._height)}return $(this.getTarget()).append(t),$(t).css(\"opacity\",0),t},positionRelatively:function(){var t=this.elementLoader().getPreviousElement(this._id);if(t){if(\"match\"===this._x.toString().toLowerCase()&&(this._x=parseInt(t._x)),-1!=this._x.toString().indexOf(\"+=\")||-1!=this._x.toString().indexOf(\"-=\")){var e=parseInt(this._x.substring(2));this._x=parseInt(t._x)+parseInt($(t._container).innerWidth())+e}if(\"center\"===this._x.toString().toLowerCase()&&(this._x=t._x+$(t._container).innerWidth()/2-$(this._container).innerWidth()/2),\"match\"===this._y.toString().toLowerCase()&&(this._y=parseInt(t._y)),-1!=this._y.toString().indexOf(\"+=\")||-1!=this._y.toString().indexOf(\"-=\")){var i=parseInt(this._y.substring(2));this._y=parseInt(t._y)+parseInt($(t._container).innerHeight())+i}\"center\"===this._y.toString().toLowerCase()&&(this._y=t._y+$(t._container).innerHeight()/2-$(this._container).innerHeight()/2)}this._x=parseInt(this._x),this._y=parseInt(this._y),$(this._container).css(\"left\",this._x),$(this._container).css(\"top\",this._y)},animate:function(){for(var t,e=this._anim.split(\"|\"),i=0;i<e.length;i++){t=e[i];var n;-1!=t.indexOf(\"top_\")&&(n=t.split(\"_\")[1],-1!=n.toString().indexOf(\"+=\")&&(n=this._y+Number(n.toString().replace(\"+=\",\"\"))),-1!=n.toString().indexOf(\"-=\")&&(n=this._y-Number(n.toString().replace(\"-=\",\"\"))),-1!=n.toString().indexOf(\"orig\")&&(n=this._y),t=\"moveTop\");var s;-1!=t.indexOf(\"left_\")&&(s=t.split(\"_\")[1],-1!=s.toString().indexOf(\"+=\")&&(s=this._x+Number(s.replace(\"+=\",\"\"))),-1!=s.toString().indexOf(\"-=\")&&(s=this._x-Number(s.replace(\"-=\",\"\"))),-1!=s.toString().indexOf(\"orig\")&&(s=this._x),t=\"moveLeft\");var r;if(-1!=t.indexOf(\"scale_\"))r=parseFloat(t.split(\"_\")[1]),r>1&&(r/=100),t=-1!=t.indexOf(\"lscale_\")?\"lscale\":\"scale\";else{var a=1;\"undefined\"!=typeof TweenMax&&this._container._gsTransform&&(a=this._container._gsTransform.scaleX),r=a}var o=50,l=(this._animease,this);switch(t){case\"remove\":var h={opacity:0};$(this._container).stop(!0,!1).delay(1e3*this._animdelay).animate(h,{duration:1e3*this._animtime,easing:JQEase(this._animease),complete:function(){$(l._container).remove()}});break;case\"enable\":case\"enabled\":\"button\"==this._type?this.enableBtn():this.enable();break;case\"disable\":case\"disabled\":if(\"button\"==this._type){var h={opacity:.3};$(this._container).delay(1e3*this._animdelay).animate(h,{duration:1e3*this._animtime,easing:JQEase(this._animease),complete:this.disableBtn.bind(this)})}else this.disable();break;case\"hidden\":case\"hide\":var h={opacity:0};$(this._container).stop(!0,!1).delay(1e3*this._animdelay).animate(h,{duration:1e3*this._animtime,easing:JQEase(this._animease),complete:function(){l.registerAnimComplete.bind(l),$(l._container).css(\"visiblity\",\"hidden\")}});break;case\"alpha\":case\"show\":var h={opacity:1,queue:!1};$(this._container).css(\"visibility\",\"visible\"),$(this._container).css(\"opacity\",0),$(this._container).stop(!0,!1).delay(1e3*this._animdelay).animate(h,{duration:1e3*this._animtime,easing:JQEase(this._animease),complete:this.registerAnimComplete.bind(this)});break;case\"top\":var h={top:this._y,opacity:1},c=-1*parseInt($(this._screen._container).css(\"height\"))-o;$(this._container).css(\"top\",c),$(this._container).css(\"visibility\",\"visible\"),$(this._container).stop(!0,!1).delay(1e3*this._animdelay).animate(h,{duration:1e3*this._animtime,easing:JQEase(this._animease),complete:this.registerAnimComplete.bind(this)});break;case\"bottom\":var h={top:this._y,opacity:1},c=parseInt($(this._screen._container).css(\"height\"))+o;$(this._container).css(\"top\",c),$(this._container).css(\"visibility\",\"visible\"),$(this._container).stop(!0,!1).delay(1e3*this._animdelay).animate(h,{duration:1e3*this._animtime,easing:JQEase(this._animease),complete:this.registerAnimComplete.bind(this)});break;case\"left\":var h={left:this._x,opacity:1},c=-1*parseInt($(this._screen._container).css(\"width\"))-o;$(this._container).css(\"left\",c),$(this._container).css(\"visibility\",\"visible\"),$(this._container).stop(!0,!1).delay(1e3*this._animdelay).animate(h,{duration:1e3*this._animtime,easing:JQEase(this._animease),complete:this.registerAnimComplete.bind(this)});break;case\"right\":var h={left:this._x,opacity:1},c=parseInt($(this._screen._container).css(\"width\"))+o;$(this._container).css(\"left\",c),$(this._container).css(\"visibility\",\"visible\"),$(this._container).delay(1e3*this._animdelay).animate(h,{duration:1e3*this._animtime,easing:JQEase(this._animease),complete:this.registerAnimComplete.bind(this)});break;case\"moveTop\":case\"movetop\":var h={top:n,opacity:1};$(this._container).css(\"visibility\",\"visible\"),$(this._container).stop(!0,!1).delay(1e3*this._animdelay).animate(h,{duration:1e3*this._animtime,easing:JQEase(this._animease),complete:this.registerAnimComplete.bind(this)});break;case\"moveLeft\":case\"moveleft\":var h={left:s,opacity:1};$(this._container).css(\"visibility\",\"visible\"),$(this._container).stop(!0,!1).delay(1e3*this._animdelay).animate(h,{duration:1e3*this._animtime,easing:JQEase(this._animease),complete:this.registerAnimComplete.bind(this)});break;case\"drop\":var h={scale:1,opacity:1};$(this._container).css(\"scale\",3),$(this._container).css(\"opacity\",0),$(this._container).css(\"visibility\",\"visible\"),$(this._container).stop(!0,!1).delay(1e3*this._animdelay).animate(h,{duration:1e3*this._animtime,easing:JQEase(this._animease),complete:this.registerAnimComplete.bind(this)});break;case\"scale\":var h={scale:r,opacity:1};$(this._container).stop(!0,!1).delay(1e3*this._animdelay).animate(h,{duration:1e3*this._animtime,easing:JQEase(this._animease),complete:this.registerAnimComplete.bind(this)});break;case\"lscale\":break;case\"scaleup\":var h={scale:1,opacity:1};$(this._container).css(\"scale\",0),$(this._container).css(\"opacity\",0),$(this._container).css(\"visibility\",\"visible\"),$(this._container).stop(!0,!1).delay(1e3*this._animdelay).animate(h,{duration:1e3*this._animtime,easing:JQEase(this._animease),complete:this.registerAnimComplete.bind(this)});break;default:$(this._container).show(),$(this._container).css(\"visibility\",\"visible\"),$(this._container).css(\"opacity\",1),this.registerAnimComplete()}}},registerEvents:function(){if(\"disabled\"!=this._anim&&\"disable\"!=this._anim){this._arRollovers=[],this._arRollouts=[],this._arClicks=[];var t,e=!1,i=!1,n=!1,s=this._event.split(\",\");$(this._container).off();for(var r=0;r<s.length;r++)if(t=this._screen.getEventById(s[r])){if(t._arRollovers.length>0){e=!0;for(var a=0;a<t._arRollovers.length;a++)this._arRollovers.push(t._arRollovers[a])}if(t._arRollouts.length>0){i=!0;for(var a=0;a<t._arRollouts.length;a++)this._arRollouts.push(t._arRollouts[a]),this._screen.fireEvents(t._arRollouts[a],this)}if(t._arClicks.length>0){n=!0;for(var a=0;a<t._arClicks.length;a++)this._arClicks.push(t._arClicks[a])}}else alert(\"event not found:\"+s[r]);e&&(this._screen.fireEvents(this._arRollouts,this),$(this._container).on(\"mouseenter\",this.mouseOverHandler.bind(this)),$(this._container).css(\"cursor\",\"pointer\")),i&&$(this._container).on(\"mouseleave\",this.mouseOutHandler.bind(this)),n&&($(this._container).on(\"click\",this.clickHandler.bind(this)),$(this._container).css(\"cursor\",\"pointer\"),$(this._container).children().css(\"cursor\",\"pointer\"))}},mouseOverHandler:function(){this._screen.fireEvents(this._arRollovers,this)},mouseOutHandler:function(){this._screen.fireEvents(this._arRollouts,this)},clickHandler:function(t){t.stopPropagation(),t.preventDefault(),this._screen.fireEvents(this._arClicks,this)},disable:function(){$(this._container).off(),$(this._container).css(\"cursor\",\"default\"),$(this._container).children().css(\"cursor\",\"default\")},enable:function(){this._event&&((\"disabled\"==this._anim||\"disable\"==this._anim)&&(this._anim=\"alpha\"),this.registerEvents())},disableBtn:function(){this.disable(),$(this._container).find(\"input\").css(\"cursor\",\"default\"),$(this._container).css(\"visibility\",\"visible\"),$(this._container).css(\"zoom\",\"1\"),$(this._container).css(\"display\",\"block\"),$(this._container).css(\"opacity\",.2)},enableBtn:function(){this.enable(),$(this._container).find(\"input\").css(\"cursor\",\"pointer\"),$(this._container).css(\"visibility\",\"visible\"),$(this._container).css(\"opacity\",1),$(this._container).css(\"display\",\"block\")},rollover:function(){for(var t=0;t<this._arRollovers.length;t++)this._screen.fireEvents(this._arRollovers[t],this)},rollout:function(){for(var t=0;t<this._arRollouts.length;t++)this._screen.fireEvents(this._arRollouts[t],this)},hide:function(){$(this._container).css(\"opacity\",0),$(this._container).hide()},show:function(){$(this._container).css(\"opacity\",1),$(this._container).show()},reset:function(){this.elementHasNoAnim()||this.hide(),(\"hidden\"===this._anim||\"hide\"===this._anim)&&this.hide(),this._event&&(this._arRollouts.length>0&&this.rollout(),this.enable()),this._container.x=this._x,this._container.y=this._y}},ElementLoader.prototype={load:function(){this._batchFinished=!1,this.attachPreloader();for(var t=0;t<this._arElements.length;t++)this._arElements[t]._container&&(this._arElements[t]._container=null),this._arElements[t].create();for(var t=0;t<this._arElements.length;t++)if(this._arElements[t]._elementLoader=this,\"image\"==this._arElements[t]._type){var e=this._arElements[t]._xml.text(),i=new PxLoaderImage(e);i.element=this._arElements[t],this._loader.add(i)}this._loader.start()},delayRelativePos:function(t){setTimeout(function(){t.positionRelatively(),t.animate()},100)},delayAnimate:function(t){setTimeout(function(){t.animate()},100)},checkAllAnimsComplete:function(){for(var t=!0,e=0;e<this._arElements.length;e++)if(!this._arElements[e]._initialAnimComplete){t=!1;break}return t},checkBatchAnimsComplete:function(){var t=this.checkAllAnimsComplete();if(t&&!this._batchFinished){this._batchFinished=!0;for(var e=0;e<this._arElements.length;e++)if(this._arElements[e]._event&&this._arElements[e].registerEvents(),\"custom\"==this._arElements[e]._type)try{this._arElements[e]._custom.init()}catch(i){}this._onAnimsComplete&&(this._onCompleteParams?this._onCompleteScope[this._onAnimsComplete](this._onCompleteParams):this._onCompleteScope[this._onAnimsComplete]())}},showPreloader:function(){$(this._preloader).show()},attachPreloader:function(){if(!get(\"preloader\")){var t=($(this._screen._container).innerWidth()-34)/2,e=($(this._screen._container).innerHeight()-34)/2;this._preloader=create({type:\"div\",id:\"preloader\"}),$(this._preloader).css(\"position\",\"absolute\"),$(this._preloader).css(\"z-index\",999),$(this._preloader).css(\"left\",t),$(this._preloader).css(\"top\",e),$(this._preloader).addClass(\"preloader\"),$(this._preloader).hide(),this._screen._container.appendChild(this._preloader),this.showPreloader()\n}},removePreloader:function(){pl=this._preloader,this._screen._container.removeChild(pl),this._preloader=null},hidePreloader:function(){this._preloader&&$(this._preloader).animate({opacity:0},{duration:1e3,complete:this.removePreloader.bind(this)})},getElements:function(){return this._arElements},addElement:function(t){t._elementLoader=this,this.getElements().push(t)},getElementById:function(t){for(var e=null,i=0;i<this._arElements.length;i++)if(this._arElements[i]._id==t){e=this._arElements[i];break}return e},getElementByType:function(t){for(var e=null,i=0;i<this._arElements[i].length;i++)if(this._arElements[i]._type==t){e=this._arElements[i];break}return e},getPreviousElement:function(t){for(var e=null,i=0;i<this._arElements.length;i++)if(this._arElements[i]._id==t&&i>0){e=this._arElements[i-1];break}return e},getNextElement:function(t){for(var e=null,i=0;i<this._arElements.length;i++)if(this._arElements[i]._id==t&&i<this._arElements.length-1){e=this._arElements[i+1];break}return e},stop:function(){this._loader.addCompletionListener(function(){return!1}),this._loader.addProgressListener(function(){return!1}),this._onLoadComplete=null,this._onAnimsComplete=null}};","/*\n * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/\n *\n * Uses the built in easing capabilities added In jQuery 1.1\n * to offer multiple easing options\n *\n * TERMS OF USE - jQuery Easing\n * \n * Open source under the BSD License. \n * \n * Copyright © 2008 George McGinley Smith\n * All rights reserved.\n * \n * Redistribution and use in source and binary forms, with or without modification, \n * are permitted provided that the following conditions are met:\n * \n * Redistributions of source code must retain the above copyright notice, this list of \n * conditions and the following disclaimer.\n * Redistributions in binary form must reproduce the above copyright notice, this list \n * of conditions and the following disclaimer in the documentation and/or other materials \n * provided with the distribution.\n * \n * Neither the name of the author nor the names of contributors may be used to endorse \n * or promote products derived from this software without specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY \n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE\n *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE\n *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED \n * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED \n * OF THE POSSIBILITY OF SUCH DAMAGE. \n *\n*/\n\n// t: current time, b: begInnIng value, c: change In value, d: duration\njQuery.easing['jswing'] = jQuery.easing['swing'];\n\njQuery.extend( jQuery.easing,\n{\n\tdef: 'easeOutQuad',\n\tswing: function (x, t, b, c, d) {\n\t\t//alert(jQuery.easing.default);\n\t\treturn jQuery.easing[jQuery.easing.def](x, t, b, c, d);\n\t},\n\teaseInQuad: function (x, t, b, c, d) {\n\t\treturn c*(t/=d)*t + b;\n\t},\n\teaseOutQuad: function (x, t, b, c, d) {\n\t\treturn -c *(t/=d)*(t-2) + b;\n\t},\n\teaseInOutQuad: function (x, t, b, c, d) {\n\t\tif ((t/=d/2) < 1) return c/2*t*t + b;\n\t\treturn -c/2 * ((--t)*(t-2) - 1) + b;\n\t},\n\teaseInCubic: function (x, t, b, c, d) {\n\t\treturn c*(t/=d)*t*t + b;\n\t},\n\teaseOutCubic: function (x, t, b, c, d) {\n\t\treturn c*((t=t/d-1)*t*t + 1) + b;\n\t},\n\teaseInOutCubic: function (x, t, b, c, d) {\n\t\tif ((t/=d/2) < 1) return c/2*t*t*t + b;\n\t\treturn c/2*((t-=2)*t*t + 2) + b;\n\t},\n\teaseInQuart: function (x, t, b, c, d) {\n\t\treturn c*(t/=d)*t*t*t + b;\n\t},\n\teaseOutQuart: function (x, t, b, c, d) {\n\t\treturn -c * ((t=t/d-1)*t*t*t - 1) + b;\n\t},\n\teaseInOutQuart: function (x, t, b, c, d) {\n\t\tif ((t/=d/2) < 1) return c/2*t*t*t*t + b;\n\t\treturn -c/2 * ((t-=2)*t*t*t - 2) + b;\n\t},\n\teaseInQuint: function (x, t, b, c, d) {\n\t\treturn c*(t/=d)*t*t*t*t + b;\n\t},\n\teaseOutQuint: function (x, t, b, c, d) {\n\t\treturn c*((t=t/d-1)*t*t*t*t + 1) + b;\n\t},\n\teaseInOutQuint: function (x, t, b, c, d) {\n\t\tif ((t/=d/2) < 1) return c/2*t*t*t*t*t + b;\n\t\treturn c/2*((t-=2)*t*t*t*t + 2) + b;\n\t},\n\teaseInSine: function (x, t, b, c, d) {\n\t\treturn -c * Math.cos(t/d * (Math.PI/2)) + c + b;\n\t},\n\teaseOutSine: function (x, t, b, c, d) {\n\t\treturn c * Math.sin(t/d * (Math.PI/2)) + b;\n\t},\n\teaseInOutSine: function (x, t, b, c, d) {\n\t\treturn -c/2 * (Math.cos(Math.PI*t/d) - 1) + b;\n\t},\n\teaseInExpo: function (x, t, b, c, d) {\n\t\treturn (t==0) ? b : c * Math.pow(2, 10 * (t/d - 1)) + b;\n\t},\n\teaseOutExpo: function (x, t, b, c, d) {\n\t\treturn (t==d) ? b+c : c * (-Math.pow(2, -10 * t/d) + 1) + b;\n\t},\n\teaseInOutExpo: function (x, t, b, c, d) {\n\t\tif (t==0) return b;\n\t\tif (t==d) return b+c;\n\t\tif ((t/=d/2) < 1) return c/2 * Math.pow(2, 10 * (t - 1)) + b;\n\t\treturn c/2 * (-Math.pow(2, -10 * --t) + 2) + b;\n\t},\n\teaseInCirc: function (x, t, b, c, d) {\n\t\treturn -c * (Math.sqrt(1 - (t/=d)*t) - 1) + b;\n\t},\n\teaseOutCirc: function (x, t, b, c, d) {\n\t\treturn c * Math.sqrt(1 - (t=t/d-1)*t) + b;\n\t},\n\teaseInOutCirc: function (x, t, b, c, d) {\n\t\tif ((t/=d/2) < 1) return -c/2 * (Math.sqrt(1 - t*t) - 1) + b;\n\t\treturn c/2 * (Math.sqrt(1 - (t-=2)*t) + 1) + b;\n\t},\n\teaseInElastic: function (x, t, b, c, d) {\n\t\tvar s=1.70158;var p=0;var a=c;\n\t\tif (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;\n\t\tif (a < Math.abs(c)) { a=c; var s=p/4; }\n\t\telse var s = p/(2*Math.PI) * Math.asin (c/a);\n\t\treturn -(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;\n\t},\n\teaseOutElastic: function (x, t, b, c, d) {\n\t\tvar s=1.70158;var p=0;var a=c;\n\t\tif (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;\n\t\tif (a < Math.abs(c)) { a=c; var s=p/4; }\n\t\telse var s = p/(2*Math.PI) * Math.asin (c/a);\n\t\treturn a*Math.pow(2,-10*t) * Math.sin( (t*d-s)*(2*Math.PI)/p ) + c + b;\n\t},\n\teaseInOutElastic: function (x, t, b, c, d) {\n\t\tvar s=1.70158;var p=0;var a=c;\n\t\tif (t==0) return b;  if ((t/=d/2)==2) return b+c;  if (!p) p=d*(.3*1.5);\n\t\tif (a < Math.abs(c)) { a=c; var s=p/4; }\n\t\telse var s = p/(2*Math.PI) * Math.asin (c/a);\n\t\tif (t < 1) return -.5*(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;\n\t\treturn a*Math.pow(2,-10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )*.5 + c + b;\n\t},\n\teaseInBack: function (x, t, b, c, d, s) {\n\t\tif (s == undefined) s = 1.70158;\n\t\treturn c*(t/=d)*t*((s+1)*t - s) + b;\n\t},\n\teaseOutBack: function (x, t, b, c, d, s) {\n\t\tif (s == undefined) s = 1.70158;\n\t\treturn c*((t=t/d-1)*t*((s+1)*t + s) + 1) + b;\n\t},\n\teaseInOutBack: function (x, t, b, c, d, s) {\n\t\tif (s == undefined) s = 1.70158; \n\t\tif ((t/=d/2) < 1) return c/2*(t*t*(((s*=(1.525))+1)*t - s)) + b;\n\t\treturn c/2*((t-=2)*t*(((s*=(1.525))+1)*t + s) + 2) + b;\n\t},\n\teaseInBounce: function (x, t, b, c, d) {\n\t\treturn c - jQuery.easing.easeOutBounce (x, d-t, 0, c, d) + b;\n\t},\n\teaseOutBounce: function (x, t, b, c, d) {\n\t\tif ((t/=d) < (1/2.75)) {\n\t\t\treturn c*(7.5625*t*t) + b;\n\t\t} else if (t < (2/2.75)) {\n\t\t\treturn c*(7.5625*(t-=(1.5/2.75))*t + .75) + b;\n\t\t} else if (t < (2.5/2.75)) {\n\t\t\treturn c*(7.5625*(t-=(2.25/2.75))*t + .9375) + b;\n\t\t} else {\n\t\t\treturn c*(7.5625*(t-=(2.625/2.75))*t + .984375) + b;\n\t\t}\n\t},\n\teaseInOutBounce: function (x, t, b, c, d) {\n\t\tif (t < d/2) return jQuery.easing.easeInBounce (x, t*2, 0, c, d) * .5 + b;\n\t\treturn jQuery.easing.easeOutBounce (x, t*2-d, 0, c, d) * .5 + c*.5 + b;\n\t}\n});\n\n/*\n *\n * TERMS OF USE - EASING EQUATIONS\n * \n * Open source under the BSD License. \n * \n * Copyright © 2001 Robert Penner\n * All rights reserved.\n * \n * Redistribution and use in source and binary forms, with or without modification, \n * are permitted provided that the following conditions are met:\n * \n * Redistributions of source code must retain the above copyright notice, this list of \n * conditions and the following disclaimer.\n * Redistributions in binary form must reproduce the above copyright notice, this list \n * of conditions and the following disclaimer in the documentation and/or other materials \n * provided with the distribution.\n * \n * Neither the name of the author nor the names of contributors may be used to endorse \n * or promote products derived from this software without specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY \n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE\n *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE\n *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED \n * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED \n * OF THE POSSIBILITY OF SUCH DAMAGE. \n *\n */","(function(t,e){if(typeof define===\"function\"&&define.amd){define([\"jquery\"],e)}else if(typeof exports===\"object\"){module.exports=e(require(\"jquery\"))}else{e(t.jQuery)}})(this,function(t){t.transit={version:\"0.9.12\",propertyMap:{marginLeft:\"margin\",marginRight:\"margin\",marginBottom:\"margin\",marginTop:\"margin\",paddingLeft:\"padding\",paddingRight:\"padding\",paddingBottom:\"padding\",paddingTop:\"padding\"},enabled:true,useTransitionEnd:false};var e=document.createElement(\"div\");var n={};function i(t){if(t in e.style)return t;var n=[\"Moz\",\"Webkit\",\"O\",\"ms\"];var i=t.charAt(0).toUpperCase()+t.substr(1);for(var r=0;r<n.length;++r){var s=n[r]+i;if(s in e.style){return s}}}function r(){e.style[n.transform]=\"\";e.style[n.transform]=\"rotateY(90deg)\";return e.style[n.transform]!==\"\"}var s=navigator.userAgent.toLowerCase().indexOf(\"chrome\")>-1;n.transition=i(\"transition\");n.transitionDelay=i(\"transitionDelay\");n.transform=i(\"transform\");n.transformOrigin=i(\"transformOrigin\");n.filter=i(\"Filter\");n.transform3d=r();var a={transition:\"transitionend\",MozTransition:\"transitionend\",OTransition:\"oTransitionEnd\",WebkitTransition:\"webkitTransitionEnd\",msTransition:\"MSTransitionEnd\"};var o=n.transitionEnd=a[n.transition]||null;for(var u in n){if(n.hasOwnProperty(u)&&typeof t.support[u]===\"undefined\"){t.support[u]=n[u]}}e=null;t.cssEase={_default:\"ease\",\"in\":\"ease-in\",out:\"ease-out\",\"in-out\":\"ease-in-out\",snap:\"cubic-bezier(0,1,.5,1)\",easeInCubic:\"cubic-bezier(.550,.055,.675,.190)\",easeOutCubic:\"cubic-bezier(.215,.61,.355,1)\",easeInOutCubic:\"cubic-bezier(.645,.045,.355,1)\",easeInCirc:\"cubic-bezier(.6,.04,.98,.335)\",easeOutCirc:\"cubic-bezier(.075,.82,.165,1)\",easeInOutCirc:\"cubic-bezier(.785,.135,.15,.86)\",easeInExpo:\"cubic-bezier(.95,.05,.795,.035)\",easeOutExpo:\"cubic-bezier(.19,1,.22,1)\",easeInOutExpo:\"cubic-bezier(1,0,0,1)\",easeInQuad:\"cubic-bezier(.55,.085,.68,.53)\",easeOutQuad:\"cubic-bezier(.25,.46,.45,.94)\",easeInOutQuad:\"cubic-bezier(.455,.03,.515,.955)\",easeInQuart:\"cubic-bezier(.895,.03,.685,.22)\",easeOutQuart:\"cubic-bezier(.165,.84,.44,1)\",easeInOutQuart:\"cubic-bezier(.77,0,.175,1)\",easeInQuint:\"cubic-bezier(.755,.05,.855,.06)\",easeOutQuint:\"cubic-bezier(.23,1,.32,1)\",easeInOutQuint:\"cubic-bezier(.86,0,.07,1)\",easeInSine:\"cubic-bezier(.47,0,.745,.715)\",easeOutSine:\"cubic-bezier(.39,.575,.565,1)\",easeInOutSine:\"cubic-bezier(.445,.05,.55,.95)\",easeInBack:\"cubic-bezier(.6,-.28,.735,.045)\",easeOutBack:\"cubic-bezier(.175, .885,.32,1.275)\",easeInOutBack:\"cubic-bezier(.68,-.55,.265,1.55)\"};t.cssHooks[\"transit:transform\"]={get:function(e){return t(e).data(\"transform\")||new f},set:function(e,i){var r=i;if(!(r instanceof f)){r=new f(r)}if(n.transform===\"WebkitTransform\"&&!s){e.style[n.transform]=r.toString(true)}else{e.style[n.transform]=r.toString()}t(e).data(\"transform\",r)}};t.cssHooks.transform={set:t.cssHooks[\"transit:transform\"].set};t.cssHooks.filter={get:function(t){return t.style[n.filter]},set:function(t,e){t.style[n.filter]=e}};if(t.fn.jquery<\"1.8\"){t.cssHooks.transformOrigin={get:function(t){return t.style[n.transformOrigin]},set:function(t,e){t.style[n.transformOrigin]=e}};t.cssHooks.transition={get:function(t){return t.style[n.transition]},set:function(t,e){t.style[n.transition]=e}}}p(\"scale\");p(\"scaleX\");p(\"scaleY\");p(\"translate\");p(\"rotate\");p(\"rotateX\");p(\"rotateY\");p(\"rotate3d\");p(\"perspective\");p(\"skewX\");p(\"skewY\");p(\"x\",true);p(\"y\",true);function f(t){if(typeof t===\"string\"){this.parse(t)}return this}f.prototype={setFromString:function(t,e){var n=typeof e===\"string\"?e.split(\",\"):e.constructor===Array?e:[e];n.unshift(t);f.prototype.set.apply(this,n)},set:function(t){var e=Array.prototype.slice.apply(arguments,[1]);if(this.setter[t]){this.setter[t].apply(this,e)}else{this[t]=e.join(\",\")}},get:function(t){if(this.getter[t]){return this.getter[t].apply(this)}else{return this[t]||0}},setter:{rotate:function(t){this.rotate=b(t,\"deg\")},rotateX:function(t){this.rotateX=b(t,\"deg\")},rotateY:function(t){this.rotateY=b(t,\"deg\")},scale:function(t,e){if(e===undefined){e=t}this.scale=t+\",\"+e},skewX:function(t){this.skewX=b(t,\"deg\")},skewY:function(t){this.skewY=b(t,\"deg\")},perspective:function(t){this.perspective=b(t,\"px\")},x:function(t){this.set(\"translate\",t,null)},y:function(t){this.set(\"translate\",null,t)},translate:function(t,e){if(this._translateX===undefined){this._translateX=0}if(this._translateY===undefined){this._translateY=0}if(t!==null&&t!==undefined){this._translateX=b(t,\"px\")}if(e!==null&&e!==undefined){this._translateY=b(e,\"px\")}this.translate=this._translateX+\",\"+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var t=(this.scale||\"1,1\").split(\",\");if(t[0]){t[0]=parseFloat(t[0])}if(t[1]){t[1]=parseFloat(t[1])}return t[0]===t[1]?t[0]:t},rotate3d:function(){var t=(this.rotate3d||\"0,0,0,0deg\").split(\",\");for(var e=0;e<=3;++e){if(t[e]){t[e]=parseFloat(t[e])}}if(t[3]){t[3]=b(t[3],\"deg\")}return t}},parse:function(t){var e=this;t.replace(/([a-zA-Z0-9]+)\\((.*?)\\)/g,function(t,n,i){e.setFromString(n,i)})},toString:function(t){var e=[];for(var i in this){if(this.hasOwnProperty(i)){if(!n.transform3d&&(i===\"rotateX\"||i===\"rotateY\"||i===\"perspective\"||i===\"transformOrigin\")){continue}if(i[0]!==\"_\"){if(t&&i===\"scale\"){e.push(i+\"3d(\"+this[i]+\",1)\")}else if(t&&i===\"translate\"){e.push(i+\"3d(\"+this[i]+\",0)\")}else{e.push(i+\"(\"+this[i]+\")\")}}}}return e.join(\" \")}};function c(t,e,n){if(e===true){t.queue(n)}else if(e){t.queue(e,n)}else{t.each(function(){n.call(this)})}}function l(e){var i=[];t.each(e,function(e){e=t.camelCase(e);e=t.transit.propertyMap[e]||t.cssProps[e]||e;e=h(e);if(n[e])e=h(n[e]);if(t.inArray(e,i)===-1){i.push(e)}});return i}function d(e,n,i,r){var s=l(e);if(t.cssEase[i]){i=t.cssEase[i]}var a=\"\"+y(n)+\" \"+i;if(parseInt(r,10)>0){a+=\" \"+y(r)}var o=[];t.each(s,function(t,e){o.push(e+\" \"+a)});return o.join(\", \")}t.fn.transition=t.fn.transit=function(e,i,r,s){var a=this;var u=0;var f=true;var l=t.extend(true,{},e);if(typeof i===\"function\"){s=i;i=undefined}if(typeof i===\"object\"){r=i.easing;u=i.delay||0;f=typeof i.queue===\"undefined\"?true:i.queue;s=i.complete;i=i.duration}if(typeof r===\"function\"){s=r;r=undefined}if(typeof l.easing!==\"undefined\"){r=l.easing;delete l.easing}if(typeof l.duration!==\"undefined\"){i=l.duration;delete l.duration}if(typeof l.complete!==\"undefined\"){s=l.complete;delete l.complete}if(typeof l.queue!==\"undefined\"){f=l.queue;delete l.queue}if(typeof l.delay!==\"undefined\"){u=l.delay;delete l.delay}if(typeof i===\"undefined\"){i=t.fx.speeds._default}if(typeof r===\"undefined\"){r=t.cssEase._default}i=y(i);var p=d(l,i,r,u);var h=t.transit.enabled&&n.transition;var b=h?parseInt(i,10)+parseInt(u,10):0;if(b===0){var g=function(t){a.css(l);if(s){s.apply(a)}if(t){t()}};c(a,f,g);return a}var m={};var v=function(e){var i=false;var r=function(){if(i){a.unbind(o,r)}if(b>0){a.each(function(){this.style[n.transition]=m[this]||null})}if(typeof s===\"function\"){s.apply(a)}if(typeof e===\"function\"){e()}};if(b>0&&o&&t.transit.useTransitionEnd){i=true;a.bind(o,r)}else{window.setTimeout(r,b)}a.each(function(){if(b>0){this.style[n.transition]=p}t(this).css(l)})};var z=function(t){this.offsetWidth;v(t)};c(a,f,z);return this};function p(e,i){if(!i){t.cssNumber[e]=true}t.transit.propertyMap[e]=n.transform;t.cssHooks[e]={get:function(n){var i=t(n).css(\"transit:transform\");return i.get(e)},set:function(n,i){var r=t(n).css(\"transit:transform\");r.setFromString(e,i);t(n).css({\"transit:transform\":r})}}}function h(t){return t.replace(/([A-Z])/g,function(t){return\"-\"+t.toLowerCase()})}function b(t,e){if(typeof t===\"string\"&&!t.match(/^[\\-0-9\\.]+$/)){return t}else{return\"\"+t+e}}function y(e){var n=e;if(typeof n===\"string\"&&!n.match(/^[\\-0-9\\.]+/)){n=t.fx.speeds[n]||t.fx.speeds._default}return b(n,\"ms\")}t.transit.getTransitionValue=d;return t});","/**\n * MCQ\n * VERSION: 2.0\n * JS\n * AUTHOR: Ian Duff\n * COPYRIGHT: Essemble Ltd\n * All code © 2015 Essemble Ltd. all rights reserved\n * This code is the property of Essemble Ltd and cannot be copied, reused or modified without prior permission\n **/\n\nfunction MCQ(vars) {\n\t//constructor\n\t//note: quiz extends this class\n\t\t\n\tthis._screen = vars.element._screen;\n\tthis._element = vars.element;\n\tthis._container = vars.element._container;\n\tthis._xml = vars.element._xml;\n\t\n\tthis._arQs = [];//question array\n\tthis._iCurQ = 0;//current question\n\tthis._radioBtn = false;//attach a radio button to each option\n\tthis._radioBtnX = 0;\n\tthis._radioBtnY = 0;\n\tthis._correctX = 0;\n\tthis._correctY = 0;\n\tthis._fb = null;\n\t\n\tthis._maxAttempts = null;\n\tthis._numAttempts = 0;\n\tthis._forceMany = false;//multiple selections can be forced in the xml settings\n\t\n\t//read the settings\n\t//<settings radiobutton=\"true\" radiobuttonx=\"10\" radiobuttony=\"10\" correctx=\"-20\" correcty=\"8\"/>\n\tvar settings = this._xml.find(\"settings\");\n\tif(settings.length > 0){\n\t\tif(xmlAttrStr(settings,\"radiobutton\")) this._radioBtn = Boolean(settings.attr(\"radiobutton\").toLowerCase() == \"true\");\n\t\tif(xmlAttrNum(settings,\"radiobuttonx\")) this._radioBtnX = parseInt(settings.attr(\"radiobuttonx\"));\n\t\tif(xmlAttrNum(settings,\"radiobuttony\")) this._radioBtnY = parseInt(settings.attr(\"radiobuttony\"));\n\t\tif(xmlAttrNum(settings,\"correctx\")) this._correctX = parseInt(settings.attr(\"correctx\"));\n\t\tif(xmlAttrNum(settings,\"correcty\")) this._correctY = parseInt(settings.attr(\"correcty\"));\n\t\tif(xmlAttrNum(settings,\"attempts\")) this._maxAttempts = parseInt(settings.attr(\"attempts\"));\n\t\tif(xmlAttrStr(settings,\"manyfrommany\")) this._forceMany = Boolean(settings.attr(\"manyfrommany\").toLowerCase() == \"true\");\n\t}\n\t\n\tvar scope = this;\n\t$(this._xml).find('question').each(function () {\n\t\tscope.makeQuestionObj($(this))\n    });\n}\n\nMCQ.prototype = {\n\t//MCQ methods\n\t\n\tmakeQuestionObj:function(xml){\n\t\t//for each question create a question object\n\t\t//the object has an element array, option array and feedback array\n\t\t//question properties\n\t\t//question container\n\t\t//option container\n\t\t//feedback container\n\t\t//methods to return the current question elements, options and feedbacks by id\n\t\tvar qObj = {};\n\t\tqObj._id = xml.attr(\"id\")  || \"question\" + this._arQs.length+1;\n\t\tqObj._time = xml.attr(\"time\") || 0;\n\t\tqObj._xml = xml;\n\t\tqObj._arElements = []; //stores all the option elements and supporting elements for this question\n\t\tqObj._arOptions = []; //stores all option objects (a property of which is the option element) for this question\n\t\tqObj._arFbs = []; //stores feedback objects for this question (pass, partial, fail)\n\t\tqObj._radioMode = true;\n\t\tqObj._bPassed = false;\n\t\tqObj._event = null;\n\t\tif(xml.attr(\"event\")) qObj._event = xml.attr(\"event\");\n\t\t\n\t\t//the question container will hold everything \n\t\tqObj._qContainer = create({ type: \"div\", id: \"questionContainer\" });\n\t\tthis._container.appendChild(qObj._qContainer);\n\t\t\n\t\t//option container will contain the question options, buttons and any supporting elements\n\t\tqObj._optionContainer = create({ type: \"div\", id: \"optionContainer\" }); \n\t\t$(qObj._optionContainer).css(\"left\",0);  \n\t\t$(qObj._optionContainer).css(\"top\",0); \n\t\tqObj._qContainer.appendChild(qObj._optionContainer);\n\n\t\t//feedback container\n\t\tqObj._fbContainer = create({ type: \"div\", id: \"feedbackContainer\" }); \n\t\t$(qObj._fbContainer).css(\"left\",0); \n\t\t$(qObj._fbContainer).css(\"top\",0); \n\t\tqObj._qContainer.appendChild(qObj._fbContainer); \n\t\t\n\t\t\n\t\tqObj.getElementById = function(id){\n\t\t\tvar ret = null;\n\t\t\tfor (var i=0;i<this._arElements.length;i++){\n\t\t\t\tif(this._arElements[i]._id == id){\n\t\t\t\t\tret = this._arElements[i];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn ret;\n\t\t}\n\t\tqObj.getOptionById = function(id){\n\t\t\tvar ret = null;\n\t\t\tfor (var i=0;i<this._arOptions.length;i++){\n\t\t\t\tif(this._arOptions[i]._id == id){\n\t\t\t\t\tret = this._arOptions[i];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn ret;\n\t\t}\n\t\tqObj.getFeedbackById = function(id){\n\t\t\tvar ret = null;\n\t\t\tfor (var i=0;i< this._arFbs.length;i++){\n\t\t\t\tif(this._arFbs[i]._id == id){\n\t\t\t\t\tret = this._arFbs[i];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn ret;\n\t\t}\n\t\t\n\t\t//for each question create 3 arrays:\n\t\t//qObj._arElements (contains options and supporting elements, including confirm and reset buttons)\n\t\t//qObj._arOptions (contains option objects)\n\t\t//qObj._arFbs (contains feedback objects)\n\t\t\n\t\tvar correctCount = 0;\n\t\tvar scope = this;\n\t\t$(xml).children().each(function(){\n\t\t\tvar nodeType = this.tagName;\n\t\t\tswitch(nodeType){\n\t\t\t\tcase \"option\":\n\t\t\t\t\tvar firstElement = $(this).children()[0];\n\t\t\t\t\tvar oOptionElement = new Element({screen:scope._screen, xml:firstElement});\n\t\t\t\t\toOptionElement._target = qObj._optionContainer;\n\t\t\t\t\tscope._screen.getElementLoaderArray().push(oOptionElement);//add them to the screen element array\n\t\t\t\t\tqObj._arElements.push(oOptionElement);//also add them to the object._arElements array for local control\n\t\t\t\t\t\n\t\t\t\t\t//create an option object \n\t\t\t\t\t//this so we can loop thru just the options in each question\n\t\t\t\t\t//properties include: correct, selected, element, (specific) feedback\n\t\t\t\t\t//push to the qObj._arOptions array\n\t\t\t\t\tvar qOptionObj = {};\n\t\t\t\t\tqOptionObj._id = oOptionElement._id;\n\t\t\t\t\tqOptionObj._element = oOptionElement;\n\t\t\t\t\tqOptionObj._correct = Boolean($(this).attr(\"correct\").toLowerCase() == \"true\");\n\t\t\t\t\tqOptionObj._selected = false;\n\t\t\t\t\tqOptionObj._feedback = null;\n\t\n\t\t\t\t\t//radio mode is when there is only one correct answer\n\t\t\t\t\t//in radio mode only one option can be selected at a time\n\t\t\t\t\tif(qOptionObj._correct) correctCount++;\n\t\t\t\t\tif(correctCount > 1 || scope._forceMany) qObj._radioMode = false;\n\t\t\t\t\tqObj._arOptions.push(qOptionObj);\n\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tcase \"fb\":\n\t\t\t\t\t//create a feedback object\n\t\t\t\t\t//properties are id (either option id or \"pass\",\"partial\",\"fail\")\n\t\t\t\t\t//and an array of elements\n\t\t\t\t\t//push to the qObj._arFbs array\n\t\t\t\t\tvar fbObj = {};\n\t\t\t\t\tfbObj._id = $(this).attr(\"id\");\n\t\t\t\t\tfbObj._xml = $(this).children();\n\t\t\t\t\tfbObj._elements = [];\n\t\t\t\t\tfbObj._event = null;\n\t\t\t\t\tif($(this).attr(\"event\")) fbObj._event = $(this).attr(\"event\");\n\t\t\t\t\t\n\t\t\t\t\t$(this).children().each(function(){\n\t\t\t\t\t\tvar el = new Element({screen:scope._screen, xml:this });\n\t\t\t\t\t\tfbObj._elements.push(el);\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t\tqObj._arFbs.push(fbObj);\n\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\tdefault:\n\t\t\t\t\t//all other elements, e.g. buttons (confirm & reset), additional text, images, audio, video\n\t\t\t\t\tvar otherEl = new Element({screen:scope._screen, xml:this });\n\t\t\t\t\totherEl._target = qObj._optionContainer;\n\t\t\t\t\tscope._screen.getElementLoaderArray().push(otherEl);//add them to the screen element array\n\t\t\t\t\tqObj._arElements.push(otherEl);//also add them to the object._arElements array for local control\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\tscope._arQs.push(qObj);\n\t\t});\n\t},\n\t\n\tinit:function(){\n\t\t//init called from the ElementLoader \n\t\t//when all elements in the batch have loaded and animated\n\t\tthis.loadQuestion(this._iCurQ);\n\t},\n\t\n\tloadQuestion:function(id){\n\t\tvar q = this.curQ();\n\t\tif(q._event) this._screen.doClickEventById(q._event);\n\t},\n\t\n\tselect:function(element){\n\t\tvar q = this.curQ();\n\t\tvar selectedOption = q.getOptionById(element._id);\n\t\t\n\t\tif(q._radioMode){\n\t\t\telement.disable();\n\t\t\tfor (var i=0; i<q._arOptions.length;i++){\n\t\t\t\tif(q._arOptions[i]._element != element){\n\t\t\t\t\tq._arOptions[i]._element.enable();\n\t\t\t\t\tq._arOptions[i]._selected = false;\n\t\t\t\t} \n\t\t\t}\n\t\t\tselectedOption._selected = true;\n\t\t} else {\n\t\t\tif(selectedOption._selected){\n\t\t\t\t//deselect\n\t\t\t\tselectedOption._selected = false;\n\t\t\t\telement.enable();\n\t\t\t\telement.rollout();\n\t\t\t\t$(element._container).on('mouseenter', element.mouseOverHandler.bind(element));\n\t\t\t\t$(element._container).on('mouseleave', element.mouseOutHandler.bind(element));\n\t\t\t} else {\n\t\t\t\t//select\n\t\t\t\t//disable rollover events\n\t\t\t\tselectedOption._selected = true;\n\t\t\t\t$(element._container).off('mouseenter');\n\t\t\t\t$(element._container).off('mouseleave');\n\t\t\t}\n\t\t}\n\n\t\t//if any of the options have been selected, enable the confirm btn, otherwise disable it\n\t\tvar bEnable = false;\n\t\tfor (var i=0; i<q._arOptions.length;i++) {\n\t\t\tif(q._arOptions[i]._selected) bEnable = true;\n\t\t}\n\t\t\n\t\tvar confirmBtn = q.getElementById(\"submitBtn\");\n\t\tif(!confirmBtn) confirmBtn = this._screen.getElementById(\"submitBtn\");\n\t\tif(confirmBtn){\n\t\t\tbEnable ? confirmBtn.enableBtn() : confirmBtn.disableBtn();\n\t\t}\n\t},\n\t\n\tsubmit:function(element){\n\t\tvar q = this.curQ();\n\t\tvar optionCorrectCount = 0;\n\t\tvar userCorrectCount = 0;\n\t\tvar allCorrect = false;\n\t\t//var fb = null;\n\t\tvar selectedOptionPos = null; //remember the (last) selected option in case of specific feedback\n\t\tvar count = 0;\n\t\tvar bPartial = false;\n\t\t\n\t\t//disable confirm, enable reset\n\t\tvar confirmBtn = q.getElementById(\"submitBtn\");\n\t\tif(!confirmBtn) confirmBtn = this._screen.getElementById(\"submitBtn\");\n\t\tif(confirmBtn) confirmBtn.disableBtn();\n\t\t\n\t\tvar resetBtn = q.getElementById(\"resetBtn\");\n\t\tif(!resetBtn) resetBtn = this._screen.getElementById(\"resetBtn\");\n\t\tif(resetBtn) resetBtn.enableBtn();\n\t\t\n\t\t//disable options and work out which ones answered correctly\n\t\tfor (var i=0;i<q._arOptions.length;i++) {\n\t\t\tq._arOptions[i]._element.disable();\n\t\t\tif(q._arOptions[i]._correct) { optionCorrectCount++; };\n\t\t\tif(q._arOptions[i]._selected && q._arOptions[i]._correct) { userCorrectCount++; bPartial = true;  };\n\t\t\tif(q._arOptions[i]._selected && !q._arOptions[i]._correct) userCorrectCount--;\n\t\t\tif(q._arOptions[i]._selected) {\n\t\t\t\tselectedOptionPos = (count+1);\n\t\t\t}\n\t\t\tcount++;\n\t\t}\n\t\t\n\t\t//does the selected option have specific feedback? (returns null if not)\n\t\tvar spFb = q.getFeedbackById(selectedOptionPos);\n\n\t\tif(userCorrectCount == optionCorrectCount){\n\t\t\t//all correct\n\t\t\tspFb ? this._fb = spFb : this._fb = q.getFeedbackById(\"pass\");\t\t\t\n\t\t} else if (bPartial){\n\t\t\t//some correct\n\t\t\tspFb ? this._fb = spFb : this._fb = q.getFeedbackById(\"partial\");\n\t\t} else {\n\t\t\t//none correct\n\t\t\tspFb ? this._fb = spFb : this._fb = q.getFeedbackById(\"fail\");\n\t\t}\n\t\t\n\t\t//target the feedback container\n\t\tfor (var i=0;i<this._fb._elements.length;i++) {\n\t\t\tthis._fb._elements[i]._target = q._fbContainer;\n\t\t}\n\t\t\n\t\t//send a copy of the feedback array to the element loader\n\t\t//this is so that if the loader array length is increased by box nested elements\n\t\t//the copied array is updated not the orginal array\n\t\tvar fbCopy = [];\n\t\tfbCopy = this._fb._elements.slice();\n\t\t\n\t\t//load the feedback elements\n\t\tvar fbLoader = new ElementLoader({screen:this._screen, elements:fbCopy, onAnimsComplete:\"scrollToBottom\", onCompleteScope:this});\n\t\tfbLoader.load();\n\t\t\n\t\tthis.showCorrectAnswers();\n\t\tthis._numAttempts++;\n\t\t\n\t\t//enable sca if appropriate\n\t\tif(userCorrectCount != optionCorrectCount){\n\t\t\tvar scaBtn = q.getElementById(\"scaBtn\");\n\t\t\tif(scaBtn){ \n\t\t\t\tif(this._maxAttempts){\t\t\t\t\t\t\n\t\t\t\t\tif(this._numAttempts >= this._maxAttempts){\n\t\t\t\t\t\tscaBtn.enableBtn(); \n\t\t\t\t\t}\n\t\t\t\t} \n\t\t\t}\n\t\t}\n\t\t\n\t\t//fire any events defined for the feedback\n\t\tif(this._fb._event) {\n\t\t\tvar str = this._fb._event.split(\" \").join(\"\").toString();\n\t\t\tvar arSplit = str.split(\",\")\n\t\t\tfor(var i=0;i<arSplit.length;i++){\n\t\t\t\tthis._screen.doClickEventById(arSplit[i],null);\n\t\t\t}\n\t\t}\n\t},\n\n\tscrollToBottom:function(){\n\t\t$('html, body').animate({ \n\t\t   scrollTop: $(document).height()-$(window).height()}, \n\t\t   1000, \n\t\t   \"easeOutQuint\"\n\t\t);\n\t},\n\t\n\tshowCorrectAnswers:function(){\n\t\tvar q = this.curQ();\n\t\tfor (var i=0;i<q._arOptions.length;i++) {\n\t\t\tif(q._arOptions[i]._correct && q._arOptions[i]._selected){\n\t\t\t\tvar correct = create({type:\"img\", id:\"correct\"+(i+1), imgSrc:\"lib/assets/tick_small.png\", className:\"tick\"});\n\t\t\t\tvar l = $(q._arOptions[i]._element._container).position().left + this._correctX;\n\t\t\t\tvar t = $(q._arOptions[i]._element._container).position().top + this._correctY;\n\t\t\t\t//var l = this._correctX;\n\t\t\t\t//var t = this._correctY;\n\t\t\t\t$(correct).css(\"position\",\"absolute\");\n\t\t\t\t$(correct).css(\"left\",l);\n\t\t\t\t$(correct).css(\"top\",t);\n\t\t\t\tq._optionContainer.appendChild(correct);\n\t\t\t\t//q._arOptions[i]._element._container.appendChild(correct);\n\t\t\t\tconsole.log(\"ballbags\"+ t)\n\t\t\t}\n\t\t}\n\t},\n\t\n\tshowAllCorrectAnswers:function(){\n\t\tvar q = this.curQ();\n\t\tfor (var i=0;i<q._arOptions.length;i++) {\n\t\t\tif(q._arOptions[i]._correct){\n\t\t\t\tvar correct = $(q._optionContainer).find(\".tick\");\n\t\t\t\tif(correct.length == 0) {\n\t\t\t\t\tvar correct = create({type:\"img\", id:\"correct\"+(i+1) , imgSrc:\"lib/assets/tick_small.png\", className:\"tick\"});\n\t\t\t\t\tvar l = $(q._arOptions[i]._element._container).position().left + this._correctX;\n\t\t\t\t\tvar t = $(q._arOptions[i]._element._container).position().top + this._correctY;\n\t\t\t\t\t//var l = this._correctX;\n\t\t\t\t\t//var t = this._correctY;\n\t\t\t\t\t$(correct).css(\"position\",\"absolute\");\n\t\t\t\t\t$(correct).css(\"left\",l);\n\t\t\t\t\t$(correct).css(\"top\",t);\n\t\t\t\t\tq._optionContainer.appendChild(correct);\n\t\t\t\t\t//q._arOptions[i]._element._container.appendChild(correct);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t\n\treset:function(element){\n\t\tvar q = this.curQ();\n\t\tvar confirmBtn = q.getElementById(\"submitBtn\");\n\t\tif(!confirmBtn) confirmBtn = this._screen.getElementById(\"submitBtn\");\n\t\tif(confirmBtn){\n\t\t\tconfirmBtn.disableBtn();\n\t\t\tconfirmBtn.rollout();\n\t\t}\n\t\tvar resetBtn = q.getElementById(\"resetBtn\");\n\t\tif(!resetBtn) resetBtn = this._screen.getElementById(\"resetBtn\");\n\t\tif(resetBtn){\n\t\t\tresetBtn.disableBtn();\n\t\t\tresetBtn.rollout();\n\t\t}\n\t\tvar scaBtn = q.getElementById(\"scaBtn\");\n\t\tif(!scaBtn) scaBtn = this._screen.getElementById(\"scaBtn\");\n\t\tif(scaBtn){ \n\t\t\tscaBtn.hide();\n\t\t\tscaBtn.rollout(); \n\t\t}\n\t\t\n\t\t//re-set the options\n\t\tfor (var i=0;i<q._arOptions.length;i++) {\n\t\t\tq._arOptions[i]._selected = false;\n\t\t\tq._arOptions[i]._element.enable();\n\t\t\t\n\t\t\t//remove any ticks\n\t\t\tvar correct = $(q._optionContainer).find(\".tick\");\n\t\t\tif(correct.length > 0) $(correct).remove();\n\t\t}\n\t\t\n\t\t//unload the feedback elements\n\t\tthis.clearFeedbackContainer();\n\t},\n\t\n\tsca:function(vars){\n\t\tvar q = this.curQ();\n\t\tvar scaBtn = q.getElementById(\"scaBtn\");\n\t\tif(scaBtn){ scaBtn.disableBtn(); }\n\t\tvar fb = q.getFeedbackById(\"generic\");\n\t\tif(fb){\n\t\t\t//unload the feedback elements\n\t\t\tthis.clearFeedbackContainer();\n\t\t\t\n\t\t\t//target the feedback container\n\t\t\tfor (var i=0;i<fb._elements.length;i++) {\n\t\t\t\tfb._elements[i]._target = q._fbContainer;\n\t\t\t}\n\t\t\n\t\t\t//send a copy of the feedback array to the element loader\n\t\t\t//this is so that if the loader array length is increased by box nested elements\n\t\t\t//the copied array is updated not the orginal array\n\t\t\tvar fbCopy = [];\n\t\t\tfbCopy = fb._elements.slice();\n\t\t\t\n\t\t\t//load the feedback elements\n\t\t\tvar fbLoader = new ElementLoader({screen:this._screen, elements:fbCopy});\n\t\t\tfbLoader.load();\n\t\t\tthis.showAllCorrectAnswers();\n\t\t\tthis._fb = fb;\n\t\t}\n\t},\n\t\n\tcurQ:function(){\n\t\treturn this._arQs[this._iCurQ];\n\t},\n\t\n\tclearQuestionContainer:function(){\n\t\tthis.clearOptionContainer();\n\t\tthis.clearFeedbackContainer();\n\t},\n\t\n\tclearOptionContainer:function(){\n\t\tthis.curQ()._optionContainer.innerHTML = \"\";\n\t},\n\t\n\tclearFeedbackContainer:function(){\n\t\tif(this._fb){\n\t\t\tfor(var i=0;i<this._fb._elements.length;i++){\n\t\t\t\t$(this._fb._elements[i]._container).remove();\n\t\t\t}\n\t\t}\n\t}\n\t\n} //end prototype object\n","/**\r* Clock:\r* Copyright (c) 2013 Carlos Cabañero (c.cabanerochaparro@gmail.com) and contributors\r\r* Permission is hereby granted, free of charge, to any person obtaining a copy\r of this software and associated documentation files (the \"Software\"), to deal\r in the Software without restriction, including without limitation the rights\r to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r copies of the Software, and to permit persons to whom the Software is\r furnished to do so, subject to the following conditions:\r\r* The above copyright notice and this permission notice shall be included in\r all copies or substantial portions of the Software.\r\r* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r THE SOFTWARE.\r **/\r\rfunction Clock(params) {\r    var doStep = {};\r    var doDraw = {};\r    var type, initValue, data, time, showText, textColor, bodyColor, borderColor, bodyWidth, borderWidth, bodySeparation, fontFace, endCallback, dateStart, freq, netRadius, autoDraw, clockInterval, drawInterval;\r    \r    this.params = params;\r\r    function setInitialClock(clock){\r    \t\r        type = clock.params.type || Clock.TYPE_CLOCKWISE_INCREMENT;\r        initValue = clock.params.initValue || (type <= Clock.TYPE_CLOCKWISE_DECREMENT) ? 0 : 2;\r        data = initValue;\r        time = parseInt((clock.params.time) ? (clock.params.time) : 60);\r        showText = (clock.params.showText != null) ? (clock.params.showText) : true;\r        textColor = (showText) ? (clock.params.textColor || 'white') : null;\r        bodyColor = (clock.params.bodyColor) ? clock.params.bodyColor : '#FF0000';\r        borderColor = (clock.params.borderColor) ? clock.params.borderColor : 'transparent';\r        bodyWidth = clock.params.bodyWidth || 10;\r        borderWidth = clock.params.borderWidth || bodyWidth;\r        bodySeparation = (clock.params.bodySeparation) ? (clock.params.bodySeparation) : 0;\r        fontFace = (clock.params.fontFace) ? clock.params.fontFace : \"'Roboto Condensed', sans-serif\";\r        endCallback = clock.params.endCallBack || function() {\r            //console.log('TIME OUT!!');\r        };\r        dateStart = new Date();\r        freq = (clock.params.freq != null) ? clock.params.freq : 10;\r        netRadius = Math.max(bodyWidth, borderWidth);\r        autoDraw = (clock.params.autoDraw != null) ? clock.params.autoDraw : true;\r        clock.diff = 0;\r\r        //PUBLIC:\r        clock.ctx = clock.params.context;\r        clock.x = clock.params.x || 100,\r        clock.y = clock.params.y || 100,\r        clock.radius = clock.params.radius || 100;\r    }\r\r    this.init = function(){\r        setInitialClock(this);\r    }\r\r    //Draw Funcs\r    doStep[Clock.TYPE_CLOCKWISE_INCREMENT] = function(Clock) {\r        if (data >= 2) {\r            clearInterval(clockInterval);\r            clearInterval(drawInterval); \r            data = 2;\r            endCallback();\r            return;\r        }\r        var now = new Date();\r        Clock.diff = ((now.getTime() - dateStart.getTime()) / 1000);\r        data = Clock.diff * 2 / Clock.time;\r    };\r\r    doDraw[Clock.TYPE_CLOCKWISE_INCREMENT] = function(Clock) {\r        eraseZone(Clock);\r        drawBorder(Clock);\r        Clock.ctx.beginPath();\r        Clock.ctx.strokeStyle = bodyColor;\r        Clock.ctx.lineWidth = bodyWidth;\r        var quart = Math.PI / 2;\r        Clock.ctx.arc(Clock.x, Clock.y, Clock.radius, initValue * Math.PI - quart, data * Math.PI - quart, false);\r        Clock.ctx.stroke();\r        drawText(Clock);\r    };\r    \r    doStep[Clock.TYPE_COUNTERCLOCKWISE_INCREMENT] = function(Clock) {\r        if (data <= 0) {\r            clearInterval(clockInterval);\r            clearInterval(drawInterval);\r            data = 2;\r            endCallback();\r            return;\r        }\r\r        var now = new Date();\r        Clock.diff = ((now.getTime() - dateStart.getTime()) / 1000);\r        data = 2 - Clock.diff * 2 / Clock.time;\r    };\r\r    doDraw[Clock.TYPE_COUNTERCLOCKWISE_INCREMENT] = function(Clock) {\r        eraseZone(Clock);\r        drawBorder(Clock);\r        Clock.ctx.beginPath();\r        Clock.ctx.strokeStyle = bodyColor;\r        Clock.ctx.lineWidth = bodyWidth;\r        Clock.ctx.arc(Clock.x, Clock.y, Clock.radius, data * Math.PI, 0 * Math.PI, false);\r        Clock.ctx.stroke();\r        drawText(Clock);\r    };\r\r    function drawBorder(Clock) {\r        Clock.ctx.beginPath();\r        Clock.ctx.strokeStyle = borderColor;\r        Clock.ctx.lineWidth = borderWidth;\r        Clock.ctx.arc(Clock.x, Clock.y, Clock.radius + bodySeparation, 0 * Math.PI, 2 * Math.PI, false);\r        Clock.ctx.stroke();\r    }\r    function drawText(Clock) {\r        if (!showText) {\r            return;\r        }\r        Clock.ctx.fillStyle = textColor;\r        Clock.ctx.font = \"bold \" + (Clock.radius / 1.2) + \"px \" + fontFace;\r        Clock.ctx.textAlign = 'center';\r        Clock.ctx.fillText(Math.ceil(Clock.time - Clock.diff), Clock.x, Clock.y + (Clock.radius / 4));\r        Clock.ctx.restore();\r    }\r    function eraseZone(Clock) {\r        Clock.ctx.clearRect(Clock.x - Clock.radius - netRadius, Clock.y - Clock.radius - netRadius, Clock.radius * 2 + netRadius * 2, Clock.radius * 2 + netRadius * 2);\r    }\r\r    this.step = function() {\r        clockInterval = setInterval(function(Clock) {\r            doStep[type](Clock);\r        }, freq, this);\r\r        if (autoDraw) {\r            drawInterval = setInterval(function(Clock) {\r                Clock.draw();\r            }, freq, this);\r        }\r    };\r\r    this.draw = function() {\r        this.ctx.save();\r        doDraw[type](this);\r        this.ctx.restore();\r    };\r\r    this.setEndCallBack = function(newCallBack) {\r        endCallback = newCallBack;\r    };\r\r     //clear the interval\r    this.stopEndCallBack = function(){\r        clearInterval(clockInterval);\r        clearInterval(drawInterval);\r    }; \r\r    this.reset = function(params){\r        var keys= Object.keys(this.params);\r        var keys2= Object.keys(params);\r        for(var i = 0; i < keys.length; i++){\r            for (var j = 0; j < keys2.length; j++) {\r                if(keys2[j] == keys[i]){\r                    this.params[keys[i]] = params[keys2[j]]\r                    break\r                }\r            };\r        }\r\r        setInitialClock(this);\r    }\r}\rClock.TYPE_CLOCKWISE_INCREMENT = 0;\rClock.TYPE_CLOCKWISE_DECREMENT = 1;\rClock.TYPE_COUNTERCLOCKWISE_INCREMENT = 2;\rClock.TYPE_COUNTERCLOCKWISE_DECREMENT = 3;\rClock.prototype.getGameTime = function() {\r    return Math.ceil(this.diff);\r};\r\r\r/**\r * @preserve\r * QUIZ\r * VERSION: 2.1\r * JS\r * AUTHOR: Ian Duff\r * COPYRIGHT: Essemble Ltd\r * All code © 2015 Essemble Ltd. all rights reserved\r * This code is the property of Essemble Ltd and cannot be copied, reused or modified without prior permission\r */\r\rfunction Quiz (vars) {\r\t//constructor\r\tvar scope = this;\r\tthis._screen = vars.element._screen;\r\tthis._container = vars.element._container;\r\tthis._questionContainer;\t\r\tthis._timeoutContainer;\r\tthis._oTimeoutElements = {};\r\tthis._scoreContainer;\r\tthis._arScoreElements = [];\r\tthis._timer = false;\r\r\t//the question container will hold everything \r\tthis._questionContainer = create({ type: \"div\", id: \"questionContainer\" });\r\tthis._container.appendChild(this._questionContainer);\r\r\t//option container will contain the question options, buttons and any supporting elements\r\tvar optionContainer = create({ type: \"div\", id: \"optionContainer\" }); \r\t$(optionContainer).css(\"left\",0);  \r\t$(optionContainer).css(\"top\",0); \r\tthis._questionContainer.appendChild(optionContainer);\r\t\r\t//feedback container\r\tvar fbContainer = create({ type: \"div\", id: \"feedbackContainer\" }); \r\tthis._questionContainer.appendChild(fbContainer);\r\r\t//create the timeout elements\r\tthis._timeoutContainer = create({ type: \"div\", id: \"timeoutContainer\" }); //timeout container \r\t$(this._timeoutContainer).hide();\r\tthis._screen.container().appendChild(this._timeoutContainer);\r\r\t//create the score screen feedbacks (pass,fail);\r\tthis._scoreContainer = create({ type: \"div\", id: \"scoreContainer\" });; //score container\r\t$(this._scoreContainer).hide();\r\tthis._screen._container.appendChild(this._scoreContainer);\r\r\tMCQ.call(this,vars); //inherit the MCQ object\r\r\tvar timeout = $(this._xml).find(\"timeout\");\r\tvar oTimeOut = {};\r\toTimeOut._xml = timeout;\r\toTimeOut._elements = [];\r\t$(timeout).children().each(function(){\r\t\tvar el = new Element({screen:scope._screen, xml:this});\r\t\tel._target = scope._timeoutContainer;\r\t\toTimeOut._elements.push(el)\r\t});\r\r\tthis._oTimeoutElements = oTimeOut;\r\t\r\tvar score = $(this._xml).find(\"score\");\r\tthis._masteryscore = score.attr(\"masteryscore\") || 80;\r\r\t$(score).find(\"fb\").each(function(){\r\t\tvar fbObj = {};\r\t\tfbObj._id = $(this).attr(\"id\");\r\t\tfbObj._xml = score;\r\t\tfbObj._elements = [];\r\t\tfbObj._event = null;\r\t\tif($(this).attr(\"event\")) fbObj._event = $(this).attr(\"event\");\r\r\t\t$(this).children().each(function(){\r\t\t\tvar elem = new Element({screen:scope._screen, xml:this});\r\t\t\telem._target = scope._scoreContainer;\r\t\t\tfbObj._elements.push(elem);\r\t\t})\r\t\t\r\t\tscope._arScoreElements.push(fbObj);\r\t});\r\r\t//attach the timer if appropriate\r\tvar settings = $(this._xml).find(\"settings\");\r\tif(settings.attr(\"timer\")) { this._timer = Boolean(settings.attr(\"timer\").toLowerCase() === \"true\"); }\r\tvar timerx = settings.attr(\"timerx\") || 0;\r\tvar timery = settings.attr(\"timery\") || 0;\r\r\t//the timer canvas \r\tvar clockCanvas = create({ type: \"canvas\", id: \"timer\" });\r\t$(clockCanvas).css(\"position\",\"absolute\");\r\t$(clockCanvas).css(\"left\",timerx +\"px\");\r\t$(clockCanvas).css(\"top\",timery+\"px\");\r\t$(clockCanvas).attr(\"width\",300);\r\t$(clockCanvas).attr(\"height\",300);\r\tthis._clockCanvas = clockCanvas;\r\r\tvar cont = clockCanvas.getContext(\"2d\");\r\r\t//change colours, width and radius here\r\tif(this._timer){\r\t\tthis._timer = new Clock({ \r\t\t\tcontext \t: cont, \r\t\t  \ttype \t\t: Clock.TYPE_CLOCKWISE_INCREMENT,\r\t\t  \ttime \t\t: scope.curQ()._time,\r\t\t  \tshowText \t: true,\r\t\t  \ttextColor \t: '#fff',\r\t\t  \tbodyColor   : '#f1ab43',\r\t\t  \tborderColor : '#fff',\r\t\t  \tradius \t    : 100,\r\t\t  \tbodyWidth   : 20,\r\t\t  \tborderWidth : 50,\r\t\t  \tautoDraw:true,\r\t\t  \tx:150,\r\t\t  \ty:150,\r\t\t  \tendCallBack : scope.timeout.bind(scope)\r\t\t});\r\t}\r}\r\rQuiz.prototype = {\r\t//Quiz methods\r\r\tmakeQuestionObj:function(xml){\r\t\t//override the MCQ class as we don't want to load the question immediately\r\t\t//this is done on begin()\r\t\t//for each question create a question object\r\t\t//the object has an element array, option array and feedback array,\r\t\t//question properties,\r\t\t//question container,\r\t\t//option container,\r\t\t//feedback container,\r\t\t//methods to return the current question elements, options and feedbacks by id.\r\t\t\r\t\tvar qObj = {};\r\t\tqObj._id = xml.attr(\"id\")  || \"question\" + this._arQs.length+1;\r\t\tqObj._time = parseInt(xml.attr(\"time\")) || 0;\r\t\tqObj._xml = xml;\r\t\tqObj._arElements = []; //stores all the option elements and supporting elements for this question\r\t\tqObj._arOptions = []; //stores all option objects (a property of which is the option element) for this question\r\t\tqObj._arFbs = []; //stores feedback objects for this question (pass, partial, fail)\r\t\tqObj._radioMode = true;\r\t\tqObj._bPassed = false;\r\t\tqObj._event = null;\r\t\tif(xml.attr(\"event\")) qObj._event = xml.attr(\"event\");\r\r\t\t//option container will contain the question options, buttons and any supporting elements\r\t\tqObj._optionContainer = get(\"optionContainer\") //create({ type: \"div\", id: \"optionContainer\" }); \r\t\t\r\t\t//feedback container\r\t\tqObj._fbContainer = get(\"feedbackContainer\") //create({ type: \"div\", id: \"feedbackContainer\" }); \r\t\t\r\t\tqObj.getElementById = function(id){\r\t\t\tvar ret = null;\r\t\t\tfor (var i=0;i<this._arElements.length;i++){\r\t\t\t\tif(this._arElements[i]._id == id){\r\t\t\t\t\tret = this._arElements[i];\r\t\t\t\t\tbreak;\r\t\t\t\t}\r\t\t\t}\r\t\t\treturn ret;\r\t\t}\r\t\tqObj.getOptionById = function(id){\r\t\t\tvar ret = null;\r\t\t\tfor (var i=0;i<this._arOptions.length;i++){\r\t\t\t\tif(this._arOptions[i]._id == id){\r\t\t\t\t\tret = this._arOptions[i];\r\t\t\t\t\tbreak;\r\t\t\t\t}\r\t\t\t}\r\t\t\treturn ret;\r\t\t}\r\t\tqObj.getFeedbackById = function(id){\r\t\t\tvar ret = null;\r\t\t\tfor (var i=0;i<this._arFbs.length;i++){\r\t\t\t\tif(this._arFbs[i]._id == id){\r\t\t\t\t\tret = this._arFbs[i];\r\t\t\t\t\tbreak;\r\t\t\t\t}\r\t\t\t}\r\t\t\treturn ret;\r\t\t}\r\t\t\r\t\t//for each question create 3 arrays:\r\t\t//qObj._arElements (contains options and supporting elements, including confirm and reset buttons)\r\t\t//qObj._arOptions (contains option objects)\r\t\t//qObj._arFbs (contains feedback objects)\r\r\t\tvar correctCount = 0;\r\t\tvar question = xml.children();//all the nodes in the question node\r\t\tvar scope = this;\r\t\t$(xml).children().each(function(){\r\t\t\tvar nodeType = this.tagName;\r\t\t\tswitch(nodeType){\r\t\t\t\tcase \"option\":\r\t\t\t\t\tvar firstElement = $(this).children()[0];\r\t\t\t\t\tvar oOptionElement = new Element({screen:scope._screen, xml:firstElement});\r\t\t\t\t\toOptionElement._target = qObj._optionContainer;\r\t\t\t\t\tqObj._arElements.push(oOptionElement);\r\t\t\t\t\t\r\t\t\t\t\t//create an option object \r\t\t\t\t\t//this so we can loop thru just the options in each question\r\t\t\t\t\t//properties include: correct, selected, element, (specific) feedback\r\t\t\t\t\t//push to the qObj._arOptions array\r\t\t\t\t\tvar qOptionObj = {};\r\t\t\t\t\tqOptionObj._id = oOptionElement._id;\r\t\t\t\t\tqOptionObj._element = oOptionElement;\r\t\t\t\t\tqOptionObj._correct = Boolean($(this).attr(\"correct\").toLowerCase() == \"true\");\r\t\t\t\t\tqOptionObj._selected = false;\r\t\t\t\t\tqOptionObj._feedback = null;\r\t\r\t\t\t\t\t//radio mode is when there is only one correct answer\r\t\t\t\t\t//in radio mode only one option can be selected at a time\r\t\t\t\t\tif(qOptionObj._correct) correctCount++;\r\t\t\t\t\tif(correctCount > 1 || scope._forceMany) qObj._radioMode = false;\r\t\t\t\t\tqObj._arOptions.push(qOptionObj);\r\t\t\t\tbreak;\r\t\t\t\t\r\t\t\t\tcase \"fb\":\r\t\t\t\t\t//create a feedback object\r\t\t\t\t\t//properties are id (either option id or \"pass\",\"partial\",\"fail\")\r\t\t\t\t\t//and an array of elements\r\t\t\t\t\t//push to the qObj._arFbs array\r\t\t\t\t\t\r\t\t\t\t\tvar fbObj = {};\r\t\t\t\t\tfbObj._id = $(this).attr(\"id\");\r\t\t\t\t\tfbObj._xml = $(this).children();\r\t\t\t\t\tfbObj._elements = [];\r\t\t\t\t\tfbObj._event = null;\r\t\t\t\t\tif($(this).attr(\"event\")) fbObj._event = $(this).attr(\"event\");\r\t\t\t\t\t\r\t\t\t\t\t$(this).children().each(function(){\r\t\t\t\t\t\tvar el = new Element({screen:scope._screen, xml:this });\r\t\t\t\t\t\tfbObj._elements.push(el);\r\t\t\t\t\t})\r\t\t\t\t\t\r\t\t\t\t\tqObj._arFbs.push(fbObj);\r\t\t\t\r\t\t\t\tbreak;\r\t\t\t\t\r\t\t\t\tdefault:\r\t\t\t\t\t//all other elements, e.g. buttons (confirm & reset), additional text, images, audio, video\r\t\t\t\t\tvar otherEl = new Element({screen:scope._screen, xml:this });\r\t\t\t\t\totherEl._target = qObj._optionContainer;\r\t\t\t\t\tqObj._arElements.push(otherEl);\r\t\t\t\tbreak;\r\t\t\t}\r\t\t});\r\r\t\tscope._arQs.push(qObj);\r\t},\r\t\r\tinit:function(){\r\t\t//override mcq init function\r\t\t//the first question is loaded by begin()\r\t\tif(get(\"timerContainer\")){\r\t\t\tget(\"timerContainer\").appendChild(this._clockCanvas);\r\t\t} else {\r\t\t\tthis._screen._container.appendChild(this._clockCanvas);\r\t\t}\r\t},\r\t\r\tbegin:function(element){\r\t\tthis._iCurQ = 0;\r\t\tthis.loadQuestion(this._iCurQ);\r\t},\r\t\r\tloadQuestion:function(id){\r\t\tvar q = this._arQs[id];\r\t\tif(q._event) this._screen.doClickEventById(q._event);\r\r\t\t//reset any selected options\r\t\tfor (var i=0;i<q._arOptions.length;i++) {\r\t\t\tq._arOptions[i]._selected = false;\r\t\t}\r\r\t\t//target the questions option container\r\t\tfor (var i=0;i<q._arElements.length;i++){\r\t\t\tq._arElements[i]._target = get(\"optionContainer\");\r\t\t}\r\r\t\t//load the options and supporting elements within the questions option container\r\t\t//start the timer when batch load is complete\r\t\tvar optionLoader = new ElementLoader({screen:this._screen, elements:q._arElements, onAnimsComplete:\"startTimer\", onCompleteScope:this});\r\t\toptionLoader.load();\r\t},\r\r\tloadNextQuestion:function(element){\r\t\tthis.clearQuestionContainer();\r\t\tthis.clearTimeoutContainer();\r\t\t\r\t\tif(this._iCurQ < this._arQs.length-1) {\r\t\t\tthis._iCurQ++; \r\t\t\tthis.loadQuestion(this._iCurQ);\r\t\t} else {\r\t\t\tthis.showScore();\r\t\t}\r\t},\r\r\tloadPreviousQuestion:function(element){\r\t\tthis.clearQuestionContainer();\r\t\tthis.clearTimeoutContainer();\r\t\t\r\t\tif(this._iCurQ != 0) {\r\t\t\tthis._iCurQ--; \r\t\t\tthis.loadQuestion(this._iCurQ);\r\t\t}\r\t},\r\r\tsubmit:function(element){\r\t\tvar q = this._arQs[this._iCurQ];\r\t\tq._bPassed = false;\r\t\tvar optionCorrectCount = 0;\r\t\tvar userCorrectCount = 0;\r\t\tvar allCorrect = false;\r\t\tvar selectedOptionPos = null; //remember the (last) selected option in case of specific feedback\r\t\tvar count = 0;\r\t\tvar bPartial = false;\r\r\t\t//stop & hide the timer\r\t\tif(this._timer){ \r\t\t\tthis.stopTimer(); \r\t\t\t$(get(\"timer\")).fadeOut(500);\r\t\t}\r\r\t\t//disable confirm, enable reset\r\t\tvar confirmBtn = q.getElementById(\"submitBtn\");\r\t\tif(confirmBtn) confirmBtn.disableBtn();\r\t\t\r\t\tvar resetBtn = q.getElementById(\"resetBtn\");\r\t\tif(resetBtn) resetBtn.enableBtn();\r\t\t\r\t\t//disable options and work out which ones answered correctly\r\t\tfor (var i=0;i<q._arOptions.length;i++) {\r\t\t\tq._arOptions[i]._element.disable();\r\t\t\tif(q._arOptions[i]._correct) { optionCorrectCount++; };\r\t\t\tif(q._arOptions[i]._selected && q._arOptions[i]._correct) { userCorrectCount++; bPartial = true; };\r\t\t\tif(q._arOptions[i]._selected && !q._arOptions[i]._correct) userCorrectCount--;\r\t\t\tif(q._arOptions[i]._selected) {\r\t\t\t\tselectedOptionPos = (count+1);\r\t\t\t}\r\t\t\tcount++;\r\t\t}\r\t\t\r\t\t//does the selected option have specific feedback? (returns null if not)\r\t\tvar spFb = q.getFeedbackById(selectedOptionPos);\r\r\t\tif(userCorrectCount == optionCorrectCount){\r\t\t\t//all correct\r\t\t\tspFb ? this._fb = spFb : this._fb = q.getFeedbackById(\"pass\");\r\t\t\tq._bPassed = true;\t//flag question as passed\r\t\t} else if (bPartial){\r\t\t\t//some correct\r\t\t\tspFb ? this._fb = spFb : this._fb = q.getFeedbackById(\"partial\");\r\t\t} else {\r\t\t\t//none correct\r\t\t\tspFb ? this._fb = spFb : this._fb = q.getFeedbackById(\"fail\");\r\t\t}\r\r\t\t//target the feedback container\r\t\tfor (var i=0;i<this._fb._elements.length;i++) {\r\t\t\tthis._fb._elements[i]._target = q._fbContainer;\r\t\t}\r\t\t\r\t\t//send a copy of the feedback array to the element loader\r\t\t//this is so that if the loader array length is increased by box nested elements\r\t\t//the copied array is updated not the orginal array\r\t\tvar fbCopy = [];\r\t\tfbCopy = this._fb._elements.slice();\r\t\t\r\t\t//load the feedback elements\r\t\tvar fbLoader = new ElementLoader({screen:this._screen, elements:fbCopy, onAnimsComplete:\"scrollToBottom\", onCompleteScope:this});\r\t\tfbLoader.load();\r\t\t\r\t\t//fire any events defined for the feedback\r\t\tif(this._fb._event) {\r\t\t\tvar str = this._fb._event.split(\" \").join(\"\").toString();\r\t\t\tvar arSplit = str.split(\",\")\r\t\t\tfor(var i=0;i<arSplit.length;i++){\r\t\t\t\tthis._screen.doClickEventById(arSplit[i],null);\r\t\t\t}\r\t\t}\r\r\r\t\tvar score = this.getScore(true) ;\r\r\t\t$(function() {\r\t\t\t$.post(\r\t\t\t\t APP_URL+'/quiz/',\t\t\t\t\r\t\t\t\t{'id':q._id , 'passed': q._bPassed , 'score': score}\t\t\t\t\r\t\t\t)\r\t\t})\r\t\t\r\t},\r\r\tscrollToBottom:function(){\r\t\t// $('html, body').animate({ \r\t\t//    scrollTop: $(document).height()-$(window).height()}, \r\t\t//    1000, \r\t\t//    \"easeOutQuint\"\r\t\t// );\r\t},\r\t\r\ttimeout:function(){\r\t\t//empty current question\r\t\tthis.clearQuestionContainer();\r\t\t\r\t\t//stop & hide timer\r\t\tif(this._timer){ \r\t\t\tthis.stopTimer();\r\t\t\t$(get(\"timer\")).hide();\r\t\t}\r\r\t\t//send a copy of the feedback array to the element loader\r\t\t//this is so that if the loader array length is increased by box nested elements\r\t\t//the copied array is updated not the orginal array\r\t\tvar elCopy = [];\r\t\telCopy = this._oTimeoutElements._elements.slice();\r\r\t\t//load the timeout elements\r\t\tvar elementLoader = new ElementLoader({screen:this._screen, elements:elCopy});\r\t\telementLoader.load();\r\t\t\r\t\t//fire any events that may be tied to the feedback\r\t\tif(xmlAttrStr(this._oTimeoutElements._xml,\"event\")) {\r\t\t\tthis._screen.doClickEventById(this._oTimeoutElements._xml.attr(\"event\"), null);\r\t\t}\r\t\t$(this._timeoutContainer).show();\r\t},\r\r\tgetScore:function(asPercentage){\r\t\tvar score = 0;\r\t\tfor(var i=0;i<this._arQs.length;i++){\r\t\t\tif(this._arQs[i]._bPassed) score++;\r\t\t}\r\t\tvar perc = Math.round((score/this._arQs.length) *100);\r\t\tif(asPercentage){\r\t\t\treturn perc;\r\t\t} else {\r\t\t\treturn score;\r\t\t}\r\t},\r\t\r\tshowScore:function(){\r\t\t//work out the score\r\t\tvar userPercentage = this.getScore(true);\r\t\tvar oScoreFb = {};\r\r\t\t//get the appropriate feedback\r\t\tif(userPercentage >= this._masteryscore) {\r\t\t\toScoreFb = this.getScoreFeedbackById(\"pass\");\r\t\t} else {\r\t\t\toScoreFb = this.getScoreFeedbackById(\"fail\");\r\t\t}\r\r\t\t//hide the timer\r\t\tif(this._timer){\r\t\t\t$(get(\"timer\")).fadeOut(500);\r\t\t}\r\t\t\r\t\t//load feedback elements into an array\r\t\t//replace the [score] reserved word \r\t\tvar arScoreElements = [];\t\r\t\tvar scope = this;\t\r\t\t$(oScoreFb._elements).each(function () {\r\t\t\tvar copyNode = this._xml[0].cloneNode(true);\r\t\t\tscope.replaceXML(copyNode,userPercentage);//recursively checks for box nested elements\r\t\t\tvar element = new Element({screen:scope._screen, xml:copyNode});\r\t\t\telement._target = scope._scoreContainer;\r\t\t\tarScoreElements.push(element);\r\t\t})\r\t\t\r\t\t//send a copy of the feedback array to the element loader\r\t\t//this is so that if the loader array length is increased by box nested elements\r\t\t//the copied array is updated not the orginal array\r\t\tvar fbCopy = [];\r\t\tfbCopy = arScoreElements.slice();\r\t\tarScoreElements = [];\r\r\t\t//load the score elements\r\t\tvar elementLoader = new ElementLoader({screen:this._screen, elements:fbCopy});\r\t\telementLoader.load();\r\t\t\r\t\t//fire any events that may be tied to the feedback\r\t\tif(oScoreFb._event){\r\t\t\tthis._screen.doClickEventById(oScoreFb._event, null);\r\t\t}\r\t\t$(this._scoreContainer).show();\r\t},\r\r\treplaceXML:function(copyNode,userPercentage){\r\t\tif($(copyNode).children().length > 0){\r\t\t\tfor(var i=0;i<$(copyNode).children().length; i++){\r\t\t\t\tvar nestedXML = $(copyNode).children()[i];\r\t\t\t\tthis.replaceXML(nestedXML,userPercentage)\r\t\t\t}\r\t\t} else {\r\t\t\t//replaces the value of the original xml node\r\t\t\tvar xmlNode = replaceXMLStr(copyNode,\"[score]\",userPercentage); \r\t\t\tvar xmlNode = replaceXMLStr(copyNode,\"[passed]\",this.getScore(false));\r\t\t\tvar xmlNode = replaceXMLStr(copyNode,\"[total]\",this._arQs.length);  \r\t\t}\r\t},\r\r\tselect:function(element){\r\t\t//select an option\r\t\tvar q = this.curQ();\r\t\tvar selectedOption = q.getOptionById(element._id);\r\t\t\r\t\tif(q._radioMode){\r\t\t\telement.disable();\r\t\t\tfor (var i=0; i<q._arOptions.length;i++){\r\t\t\t\tif(q._arOptions[i]._element != element){\r\t\t\t\t\tq._arOptions[i]._element.enable();\r\t\t\t\t\tq._arOptions[i]._selected = false;\r\t\t\t\t} \r\t\t\t}\r\t\t\tselectedOption._selected = true;\r\t\t} else {\r\t\t\tif(selectedOption._selected){\r\t\t\t\t//deselect\r\t\t\t\tselectedOption._selected = false;\r\t\t\t\telement.enable();\r\t\t\t\telement.rollout();\r\t\t\t\t$(element._container).on('mouseenter', element.mouseOverHandler.bind(element));\r\t\t\t\t$(element._container).on('mouseleave', element.mouseOutHandler.bind(element));\r\t\t\t} else {\r\t\t\t\t//select\r\t\t\t\t//disable rollover events\r\t\t\t\tselectedOption._selected = true;\r\t\t\t\t$(element._container).off('mouseenter');\r\t\t\t\t$(element._container).off('mouseleave');\r\t\t\t}\r\t\t}\r\r\t\t//if any of the options have been selected, enable the confirm btn, otherwise disable it\r\t\tvar bEnable = false;\r\t\tfor (var i=0; i<q._arOptions.length;i++) {\r\t\t\tif(q._arOptions[i]._selected) bEnable = true;\r\t\t}\r\t\t\r\t\tvar confirmBtn = q.getElementById(\"submitBtn\");\r\t\tif(!confirmBtn) confirmBtn = this._screen.getElementById(\"submitBtn\");\r\r\t\tif(confirmBtn){\r\t\t\tbEnable ? confirmBtn.enableBtn() : confirmBtn.disableBtn();\r\t\t}\r\t},\r\t\r\trestart:function(element){\r\t\tthis.clearTimeoutContainer();\r\t\tthis.clearScoreContainer();\r\t\tthis.clearQuestionContainer();\r\t\tthis._iCurQ = 0;\r\t\tthis.loadQuestion(this._iCurQ);\r\t},\r\t\r\tstartTimer:function(){\r\t\tif(this._timer){\r\t\t\t$(get(\"timer\")).show();\r\t\t\tthis._timer.init();\r\t\t\tvar qTime = this._arQs[this._iCurQ]._time;\r\t\t\tthis._timer.time = qTime;\r\t\t\tthis._timer.step();//start the timer\r\t\t}\r\t},\r\t\r\tstopTimer:function(){\r\t\tif(this._timer){\r\t\t\tthis._timer.stopEndCallBack();\r\t\t\t//$(get(\"timer\")).remove();\r\t\t}\r\t},\r\r\tclearTimeoutContainer:function(){\r\t\tthis._timeoutContainer.innerHTML = \"\";\r\t\t$(this._timeoutContainer).css(\"display\",\"none\");\r\t},\r\t\r\tclearScoreContainer:function(){\r\t\tthis._scoreContainer.innerHTML = \"\";\r\t\t$(this._scoreContainer).css(\"display\",\"none\");\r\t},\r\t\r\tgetScoreFeedbackById:function(id){\r\t\tfor (var i=0;i<this._arScoreElements.length;i++){\r\t\t\tif(this._arScoreElements[i]._id == id){\r\t\t\t\treturn this._arScoreElements[i];\r\t\t\t\tbreak;\r\t\t\t}\r\t\t}\r\t}\r} //end prototype object\r\rextend(MCQ, Quiz); //inherit the MCQ object and its prototype methods\t"],"sourceRoot":"/source/"}